<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Rook Ceph Documentation"><meta name=author content="Rook Authors"><link href=https://rook.io/v1.12/Contributing/development-flow/ rel=canonical><link rel=icon href=https://rook.io/images/favicon_192x192.png><meta name=generator content="mkdocs-1.5.2, mkdocs-material-8.5.10"><title>Development Flow - Rook Ceph Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.975780f9.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=rook-blue data-md-color-accent=deep-orange> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#prerequisites class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> This documentation is not for the latest stable version of Rook. <a href=../../../latest-release/ > <strong>Click here for the latest release documentation.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Rook Ceph Documentation" class="md-header__button md-logo" aria-label="Rook Ceph Documentation" data-md-component=logo> <img src=https://rook.io/images/rook-logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Rook Ceph Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Development Flow </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=rook-blue data-md-color-accent=deep-orange aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=rook-blue data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/rook/rook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../Getting-Started/intro/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../Helm-Charts/helm-charts/ class=md-tabs__link> Helm Charts </a> </li> <li class=md-tabs__item> <a href=../../Storage-Configuration/Block-Storage-RBD/block-storage/ class=md-tabs__link> Storage Configuration </a> </li> <li class=md-tabs__item> <a href=../../CRDs/Cluster/ceph-cluster-crd/ class=md-tabs__link> Custom Resources </a> </li> <li class=md-tabs__item> <a href=../../Troubleshooting/krew-plugin/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=../../Upgrade/health-verification/ class=md-tabs__link> Upgrade </a> </li> <li class=md-tabs__item> <a href=./ class="md-tabs__link md-tabs__link--active"> Contributing </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Rook Ceph Documentation" class="md-nav__button md-logo" aria-label="Rook Ceph Documentation" data-md-component=logo> <img src=https://rook.io/images/rook-logo.svg alt=logo> </a> Rook Ceph Documentation </label> <div class=md-nav__source> <a href=https://github.com/rook/rook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_1 type=checkbox id=__nav_1 checked> <label class=md-nav__link for=__nav_1> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Getting-Started/intro/ class=md-nav__link> Rook </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/glossary/ class=md-nav__link> Glossary </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_1_3 type=checkbox id=__nav_1_3 checked> <label class=md-nav__link for=__nav_1_3> Prerequisites <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Prerequisites data-md-level=2> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Getting-Started/Prerequisites/prerequisites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/Prerequisites/authenticated-registry/ class=md-nav__link> Authenticated Container Registries </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../Getting-Started/quickstart/ class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/storage-architecture/ class=md-nav__link> Storage Architecture </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/example-configurations/ class=md-nav__link> Example Configurations </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/ceph-openshift/ class=md-nav__link> OpenShift </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/ceph-teardown/ class=md-nav__link> Cleanup </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/release-cycle/ class=md-nav__link> Release Cycle </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Helm Charts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Helm Charts" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Helm Charts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Helm-Charts/helm-charts/ class=md-nav__link> Helm Charts Overview </a> </li> <li class=md-nav__item> <a href=../../Helm-Charts/operator-chart/ class=md-nav__link> Ceph Operator Helm Chart </a> </li> <li class=md-nav__item> <a href=../../Helm-Charts/ceph-cluster-chart/ class=md-nav__link> Ceph Cluster Helm Chart </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Storage Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Storage Configuration" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Storage Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1> Block Storage (RBD) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Block Storage (RBD)" data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Block Storage (RBD) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Block-Storage-RBD/block-storage/ class=md-nav__link> Block Storage Overview </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Block-Storage-RBD/rbd-mirroring/ class=md-nav__link> RBD Mirroring </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Block-Storage-RBD/rbd-async-disaster-recovery-failover-failback/ class=md-nav__link> RBD Asynchronous DR Failover and Failback </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2 checked> <label class=md-nav__link for=__nav_3_2> Shared Filesystem (CephFS) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Shared Filesystem (CephFS)" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Shared Filesystem (CephFS) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Shared-Filesystem-CephFS/filesystem-storage/ class=md-nav__link> Filesystem Storage Overview </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Shared-Filesystem-CephFS/filesystem-mirroring/ class=md-nav__link> Filesystem Mirroring </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3 checked> <label class=md-nav__link for=__nav_3_3> Object Storage (RGW) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Object Storage (RGW)" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Object Storage (RGW) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Object-Storage-RGW/object-storage/ class=md-nav__link> Object Storage Overview </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Object-Storage-RGW/ceph-object-bucket-claim/ class=md-nav__link> Bucket Claim </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Object-Storage-RGW/ceph-object-bucket-notifications/ class=md-nav__link> Object Bucket Notifications </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Object-Storage-RGW/ceph-object-multisite/ class=md-nav__link> Object Store Multisite </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Object-Storage-RGW/cosi/ class=md-nav__link> Container Object Storage Interface (COSI) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4 checked> <label class=md-nav__link for=__nav_3_4> NFS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=NFS data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> NFS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/NFS/nfs/ class=md-nav__link> NFS Storage Overview </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/NFS/nfs-csi-driver/ class=md-nav__link> CSI provisioner and driver </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/NFS/nfs-security/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/NFS/nfs-advanced/ class=md-nav__link> Advanced configuration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5 checked> <label class=md-nav__link for=__nav_3_5> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Monitoring/ceph-dashboard/ class=md-nav__link> Ceph Dashboard </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Monitoring/ceph-monitoring/ class=md-nav__link> Prometheus Monitoring </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6 checked> <label class=md-nav__link for=__nav_3_6> Ceph CSI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ceph CSI" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Ceph CSI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Ceph-CSI/ceph-csi-drivers/ class=md-nav__link> Ceph CSI Drivers </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Ceph-CSI/ceph-csi-snapshot/ class=md-nav__link> Snapshots </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Ceph-CSI/ceph-csi-volume-clone/ class=md-nav__link> Volume clone </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Ceph-CSI/custom-images/ class=md-nav__link> Custom Images </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/ceph-teardown/ class=md-nav__link> Cleanup </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8 checked> <label class=md-nav__link for=__nav_3_8> Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Advanced data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Advanced/ceph-configuration/ class=md-nav__link> Ceph Configuration </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Advanced/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Advanced/key-management-system/ class=md-nav__link> Key Management System </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Advanced/ceph-osd-mgmt/ class=md-nav__link> Ceph OSD Management </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Advanced/ceph-mon-health/ class=md-nav__link> Monitor Health </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Custom Resources <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Custom Resources" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Custom Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1 checked> <label class=md-nav__link for=__nav_4_1> Cluster Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cluster Configuration" data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Cluster Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CRDs/Cluster/ceph-cluster-crd/ class=md-nav__link> CephCluster CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/Cluster/host-cluster/ class=md-nav__link> Host Storage Cluster </a> </li> <li class=md-nav__item> <a href=../../CRDs/Cluster/pvc-cluster/ class=md-nav__link> PVC Storage Cluster </a> </li> <li class=md-nav__item> <a href=../../CRDs/Cluster/stretch-cluster/ class=md-nav__link> Stretch Storage Cluster </a> </li> <li class=md-nav__item> <a href=../../CRDs/Cluster/external-cluster/ class=md-nav__link> External Storage Cluster </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2> Block Storage <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Block Storage" data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Block Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CRDs/Block-Storage/ceph-block-pool-crd/ class=md-nav__link> CephBlockPool CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/Block-Storage/ceph-block-pool-rados-namespace-crd/ class=md-nav__link> CephBlockPoolRados Namespace CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/Block-Storage/ceph-rbd-mirror-crd/ class=md-nav__link> CephRBDMirror CRD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3 checked> <label class=md-nav__link for=__nav_4_3> Shared Filesystem <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Shared Filesystem" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Shared Filesystem </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CRDs/Shared-Filesystem/ceph-filesystem-crd/ class=md-nav__link> CephFilesystem CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/Shared-Filesystem/ceph-fs-mirror-crd/ class=md-nav__link> CephFilesystemMirror CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/Shared-Filesystem/ceph-fs-subvolumegroup-crd/ class=md-nav__link> FilesystemSubVolumeGroup CRD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4 checked> <label class=md-nav__link for=__nav_4_4> Object Storage <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Object Storage" data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Object Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CRDs/Object-Storage/ceph-object-store-crd/ class=md-nav__link> CephObjectStore CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/Object-Storage/ceph-object-store-user-crd/ class=md-nav__link> CephObjectStoreUser CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/Object-Storage/ceph-object-realm-crd/ class=md-nav__link> CephObjectRealm CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/Object-Storage/ceph-object-zonegroup-crd/ class=md-nav__link> CephObjectZoneGroup CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/Object-Storage/ceph-object-zone-crd/ class=md-nav__link> CephObjectZone CRD </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-client-crd/ class=md-nav__link> CephClient CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-nfs-crd/ class=md-nav__link> CephNFS CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/specification/ class=md-nav__link> Specification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Troubleshooting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Troubleshooting data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Troubleshooting/krew-plugin/ class=md-nav__link> Krew Plugin </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/ceph-toolbox/ class=md-nav__link> Toolbox </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/common-issues/ class=md-nav__link> Common Issues </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/ceph-common-issues/ class=md-nav__link> Ceph Common Issues </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/ceph-csi-common-issues/ class=md-nav__link> CSI Common Issues </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/openshift-common-issues/ class=md-nav__link> OpenShift Common Issues </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/disaster-recovery/ class=md-nav__link> Disaster Recovery </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/direct-tools/ class=md-nav__link> Direct Tools </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/performance-profiling/ class=md-nav__link> Performance Profiling </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> Upgrade <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Upgrade data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Upgrade/health-verification/ class=md-nav__link> Health Verification </a> </li> <li class=md-nav__item> <a href=../../Upgrade/rook-upgrade/ class=md-nav__link> Rook Upgrades </a> </li> <li class=md-nav__item> <a href=../../Upgrade/ceph-upgrade/ class=md-nav__link> Ceph Upgrades </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7 checked> <label class=md-nav__link for=__nav_7> Contributing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contributing data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Development Flow <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Development Flow </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#initial-setup class=md-nav__link> Initial Setup </a> <nav class=md-nav aria-label="Initial Setup"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-fork class=md-nav__link> Create a Fork </a> </li> <li class=md-nav__item> <a href=#clone-your-fork class=md-nav__link> Clone Your Fork </a> </li> <li class=md-nav__item> <a href=#add-upstream-remote class=md-nav__link> Add Upstream Remote </a> </li> <li class=md-nav__item> <a href=#build class=md-nav__link> Build </a> </li> <li class=md-nav__item> <a href=#development-settings class=md-nav__link> Development Settings </a> <nav class=md-nav aria-label="Development Settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vs-code class=md-nav__link> VS Code </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#self-assign-issue class=md-nav__link> Self assign Issue </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layout class=md-nav__link> Layout </a> </li> <li class=md-nav__item> <a href=#development class=md-nav__link> Development </a> <nav class=md-nav aria-label=Development> <ul class=md-nav__list> <li class=md-nav__item> <a href=#design-document class=md-nav__link> Design Document </a> </li> <li class=md-nav__item> <a href=#create-a-branch class=md-nav__link> Create a Branch </a> </li> <li class=md-nav__item> <a href=#updating-your-fork class=md-nav__link> Updating Your Fork </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#submitting-a-pull-request class=md-nav__link> Submitting a Pull Request </a> <nav class=md-nav aria-label="Submitting a Pull Request"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#regression-testing class=md-nav__link> Regression Testing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#unit-tests class=md-nav__link> Unit Tests </a> <nav class=md-nav aria-label="Unit Tests"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#writing-unit-tests class=md-nav__link> Writing unit tests </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#integration-tests class=md-nav__link> Integration Tests </a> </li> <li class=md-nav__item> <a href=#tmate-session class=md-nav__link> Tmate Session </a> </li> <li class=md-nav__item> <a href=#commit-structure class=md-nav__link> Commit structure </a> <nav class=md-nav aria-label="Commit structure"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#commit-history class=md-nav__link> Commit History </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#submitting class=md-nav__link> Submitting </a> </li> <li class=md-nav__item> <a href=#backporting-to-a-release-branch class=md-nav__link> Backporting to a Release Branch </a> </li> <li class=md-nav__item> <a href=#debugging-issues-in-ceph-manager-modules class=md-nav__link> Debugging issues in Ceph manager modules </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../development-environment/ class=md-nav__link> Developer Environment </a> </li> <li class=md-nav__item> <a href=../documentation/ class=md-nav__link> Documentation </a> </li> <li class=md-nav__item> <a href=../ci-configuration/ class=md-nav__link> CI Configuration </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#initial-setup class=md-nav__link> Initial Setup </a> <nav class=md-nav aria-label="Initial Setup"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-fork class=md-nav__link> Create a Fork </a> </li> <li class=md-nav__item> <a href=#clone-your-fork class=md-nav__link> Clone Your Fork </a> </li> <li class=md-nav__item> <a href=#add-upstream-remote class=md-nav__link> Add Upstream Remote </a> </li> <li class=md-nav__item> <a href=#build class=md-nav__link> Build </a> </li> <li class=md-nav__item> <a href=#development-settings class=md-nav__link> Development Settings </a> <nav class=md-nav aria-label="Development Settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vs-code class=md-nav__link> VS Code </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#self-assign-issue class=md-nav__link> Self assign Issue </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layout class=md-nav__link> Layout </a> </li> <li class=md-nav__item> <a href=#development class=md-nav__link> Development </a> <nav class=md-nav aria-label=Development> <ul class=md-nav__list> <li class=md-nav__item> <a href=#design-document class=md-nav__link> Design Document </a> </li> <li class=md-nav__item> <a href=#create-a-branch class=md-nav__link> Create a Branch </a> </li> <li class=md-nav__item> <a href=#updating-your-fork class=md-nav__link> Updating Your Fork </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#submitting-a-pull-request class=md-nav__link> Submitting a Pull Request </a> <nav class=md-nav aria-label="Submitting a Pull Request"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#regression-testing class=md-nav__link> Regression Testing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#unit-tests class=md-nav__link> Unit Tests </a> <nav class=md-nav aria-label="Unit Tests"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#writing-unit-tests class=md-nav__link> Writing unit tests </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#integration-tests class=md-nav__link> Integration Tests </a> </li> <li class=md-nav__item> <a href=#tmate-session class=md-nav__link> Tmate Session </a> </li> <li class=md-nav__item> <a href=#commit-structure class=md-nav__link> Commit structure </a> <nav class=md-nav aria-label="Commit structure"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#commit-history class=md-nav__link> Commit History </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#submitting class=md-nav__link> Submitting </a> </li> <li class=md-nav__item> <a href=#backporting-to-a-release-branch class=md-nav__link> Backporting to a Release Branch </a> </li> <li class=md-nav__item> <a href=#debugging-issues-in-ceph-manager-modules class=md-nav__link> Debugging issues in Ceph manager modules </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/rook/rook/edit/master/Documentation/Contributing/development-flow.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1>Development Flow</h1> <p>Thank you for your time and effort to help us improve Rook! Here are a few steps to get started. If you have any questions, don't hesitate to reach out to us on our <a href=https://Rook-io.slack.com>Slack</a> dev channel.</p> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <ol> <li><a href=https://golang.org/dl/ >GO 1.20</a> or greater installed</li> <li>Git client installed</li> <li>GitHub account</li> </ol> <h2 id=initial-setup>Initial Setup<a class=headerlink href=#initial-setup title="Permanent link">&para;</a></h2> <h3 id=create-a-fork>Create a Fork<a class=headerlink href=#create-a-fork title="Permanent link">&para;</a></h3> <p>Navigate to <a href=http://github.com/rook/rook>http://github.com/rook/rook</a> and click the "Fork" button.</p> <h3 id=clone-your-fork>Clone Your Fork<a class=headerlink href=#clone-your-fork title="Permanent link">&para;</a></h3> <p>In a console window:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span>
<span class=normal><a href=#__codelineno-0-2>2</a></span>
<span class=normal><a href=#__codelineno-0-3>3</a></span>
<span class=normal><a href=#__codelineno-0-4>4</a></span>
<span class=normal><a href=#__codelineno-0-5>5</a></span>
<span class=normal><a href=#__codelineno-0-6>6</a></span>
<span class=normal><a href=#__codelineno-0-7>7</a></span>
<span class=normal><a href=#__codelineno-0-8>8</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=gp># </span>Create<span class=w> </span>the<span class=w> </span>rook<span class=w> </span>repo<span class=w> </span>path
<a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=go>mkdir -p $GOPATH/src/github.com/rook</span>
<a id=__codelineno-0-3 name=__codelineno-0-3></a>
<a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=gp># </span>Navigate<span class=w> </span>to<span class=w> </span>the<span class=w> </span><span class=nb>local</span><span class=w> </span>repo<span class=w> </span>path
<a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=go>cd $GOPATH/src/github.com/rook</span>
<a id=__codelineno-0-6 name=__codelineno-0-6></a>
<a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=gp># </span>Clone<span class=w> </span>your<span class=w> </span>fork,<span class=w> </span>where<span class=w> </span>&lt;user&gt;<span class=w> </span>is<span class=w> </span>your<span class=w> </span>GitHub<span class=w> </span>account<span class=w> </span>name
<a id=__codelineno-0-8 name=__codelineno-0-8></a><span class=go>git clone https://github.com/&lt;user&gt;/rook.git</span>
</code></pre></div></td></tr></table></div> <h3 id=add-upstream-remote>Add Upstream Remote<a class=headerlink href=#add-upstream-remote title="Permanent link">&para;</a></h3> <p>Add the upstream remote to your local git:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span>
<span class=normal><a href=#__codelineno-1-3>3</a></span>
<span class=normal><a href=#__codelineno-1-4>4</a></span>
<span class=normal><a href=#__codelineno-1-5>5</a></span>
<span class=normal><a href=#__codelineno-1-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=gp># </span>Add<span class=w> </span><span class=s1>&#39;upstream&#39;</span><span class=w> </span>to<span class=w> </span>the<span class=w> </span>list<span class=w> </span>of<span class=w> </span>remotes
<a id=__codelineno-1-2 name=__codelineno-1-2></a><span class=go>cd rook</span>
<a id=__codelineno-1-3 name=__codelineno-1-3></a><span class=go>git remote add upstream https://github.com/rook/rook.git</span>
<a id=__codelineno-1-4 name=__codelineno-1-4></a>
<a id=__codelineno-1-5 name=__codelineno-1-5></a><span class=gp># </span>Verify<span class=w> </span>the<span class=w> </span>remote<span class=w> </span>was<span class=w> </span>added
<a id=__codelineno-1-6 name=__codelineno-1-6></a><span class=go>git remote -v</span>
</code></pre></div></td></tr></table></div> <p>Two remotes should be available: <code>origin</code> and <code>upstream</code>.</p> <h3 id=build>Build<a class=headerlink href=#build title="Permanent link">&para;</a></h3> <p>Before building the project, fetch the remotes to synchronize tags.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span>
<span class=normal><a href=#__codelineno-2-2>2</a></span>
<span class=normal><a href=#__codelineno-2-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=gp># </span>Fetch<span class=w> </span>all<span class=w> </span>remotes
<a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=go>git fetch -a</span>
<a id=__codelineno-2-3 name=__codelineno-2-3></a><span class=go>make build</span>
</code></pre></div></td></tr></table></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>If in a Linux environment and <code>make build</code> command throws an error like <code>unknown revision</code> for some imports, add <code>export GOPROXY=https://proxy.golang.org,direct</code> to <code>~/.bashrc</code>. Reload your environment and confirm with <code>go env</code> that <code>GOPROXY</code> is set.</p> </div> <div class="admonition hint"> <p class=admonition-title>Hint</p> <p>Make will automatically pick up <code>podman</code> if <code>docker</code> packages are not available on your machine.</p> </div> <h3 id=development-settings>Development Settings<a class=headerlink href=#development-settings title="Permanent link">&para;</a></h3> <p>For consistent whitespace and other formatting in <code>.go</code> and other source files, apply the following settings in your IDE:</p> <ul> <li>Format with the <code>goreturns</code> tool</li> <li>Trim trailing whitespace</li> <li>Markdown Table of Contents is correctly updated automatically</li> </ul> <h4 id=vs-code>VS Code<a class=headerlink href=#vs-code title="Permanent link">&para;</a></h4> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>VS Code will prompt you automatically with some recommended extensions to install, such as Markdown, Go, YAML validator, and ShellCheck.</p> </div> <p>VS Code will automatically use the recommended settings in the <code>.vscode/settings.json</code> file.</p> <h3 id=self-assign-issue>Self assign Issue<a class=headerlink href=#self-assign-issue title="Permanent link">&para;</a></h3> <p>To self-assign an issue that is not yet assigned to anyone else, add a comment in the issue with <code>/assign</code> in the body.</p> <h2 id=layout>Layout<a class=headerlink href=#layout title="Permanent link">&para;</a></h2> <p>The overall source code layout is summarized:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1> 1</a></span>
<span class=normal><a href=#__codelineno-3-2> 2</a></span>
<span class=normal><a href=#__codelineno-3-3> 3</a></span>
<span class=normal><a href=#__codelineno-3-4> 4</a></span>
<span class=normal><a href=#__codelineno-3-5> 5</a></span>
<span class=normal><a href=#__codelineno-3-6> 6</a></span>
<span class=normal><a href=#__codelineno-3-7> 7</a></span>
<span class=normal><a href=#__codelineno-3-8> 8</a></span>
<span class=normal><a href=#__codelineno-3-9> 9</a></span>
<span class=normal><a href=#__codelineno-3-10>10</a></span>
<span class=normal><a href=#__codelineno-3-11>11</a></span>
<span class=normal><a href=#__codelineno-3-12>12</a></span>
<span class=normal><a href=#__codelineno-3-13>13</a></span>
<span class=normal><a href=#__codelineno-3-14>14</a></span>
<span class=normal><a href=#__codelineno-3-15>15</a></span>
<span class=normal><a href=#__codelineno-3-16>16</a></span>
<span class=normal><a href=#__codelineno-3-17>17</a></span>
<span class=normal><a href=#__codelineno-3-18>18</a></span>
<span class=normal><a href=#__codelineno-3-19>19</a></span>
<span class=normal><a href=#__codelineno-3-20>20</a></span>
<span class=normal><a href=#__codelineno-3-21>21</a></span>
<span class=normal><a href=#__codelineno-3-22>22</a></span>
<span class=normal><a href=#__codelineno-3-23>23</a></span>
<span class=normal><a href=#__codelineno-3-24>24</a></span>
<span class=normal><a href=#__codelineno-3-25>25</a></span>
<span class=normal><a href=#__codelineno-3-26>26</a></span>
<span class=normal><a href=#__codelineno-3-27>27</a></span>
<span class=normal><a href=#__codelineno-3-28>28</a></span>
<span class=normal><a href=#__codelineno-3-29>29</a></span>
<span class=normal><a href=#__codelineno-3-30>30</a></span>
<span class=normal><a href=#__codelineno-3-31>31</a></span>
<span class=normal><a href=#__codelineno-3-32>32</a></span>
<span class=normal><a href=#__codelineno-3-33>33</a></span>
<span class=normal><a href=#__codelineno-3-34>34</a></span>
<span class=normal><a href=#__codelineno-3-35>35</a></span>
<span class=normal><a href=#__codelineno-3-36>36</a></span>
<span class=normal><a href=#__codelineno-3-37>37</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1></a>rook
<a id=__codelineno-3-2 name=__codelineno-3-2></a>├── build                         # build makefiles and logic to build, publish and release all Rook artifacts
<a id=__codelineno-3-3 name=__codelineno-3-3></a>├── cluster
<a id=__codelineno-3-4 name=__codelineno-3-4></a>│   ├── charts                    # Helm charts
<a id=__codelineno-3-5 name=__codelineno-3-5></a>│   │   └── rook-ceph
<a id=__codelineno-3-6 name=__codelineno-3-6></a>│   │   └── rook-ceph-cluster
<a id=__codelineno-3-7 name=__codelineno-3-7></a>│   └── examples                  # Sample manifestes to configure the cluster
<a id=__codelineno-3-8 name=__codelineno-3-8></a>│
<a id=__codelineno-3-9 name=__codelineno-3-9></a>├── cmd
<a id=__codelineno-3-10 name=__codelineno-3-10></a>│   ├── rook                      # Main command entry points for operators and daemons
<a id=__codelineno-3-11 name=__codelineno-3-11></a>│
<a id=__codelineno-3-12 name=__codelineno-3-12></a>├── design                        # Design documents
<a id=__codelineno-3-13 name=__codelineno-3-13></a>├── Documentation                 # Documentation that is published to rook.io
<a id=__codelineno-3-14 name=__codelineno-3-14></a>├── images                        # Rook docker image sources
<a id=__codelineno-3-15 name=__codelineno-3-15></a>│
<a id=__codelineno-3-16 name=__codelineno-3-16></a>├── pkg
<a id=__codelineno-3-17 name=__codelineno-3-17></a>│   ├── apis
<a id=__codelineno-3-18 name=__codelineno-3-18></a>│   │   ├── ceph.rook.io          # ceph specs used in the CRDs
<a id=__codelineno-3-19 name=__codelineno-3-19></a>│   │   │   ├── v1
<a id=__codelineno-3-20 name=__codelineno-3-20></a>│   ├── client                    # auto-generated strongly typed client code to access Rook APIs
<a id=__codelineno-3-21 name=__codelineno-3-21></a>│   ├── clusterd
<a id=__codelineno-3-22 name=__codelineno-3-22></a>│   ├── daemon                    # daemons for configuring ceph
<a id=__codelineno-3-23 name=__codelineno-3-23></a>│   │   ├── ceph
<a id=__codelineno-3-24 name=__codelineno-3-24></a>│   │   └── discover
<a id=__codelineno-3-25 name=__codelineno-3-25></a>│   ├── operator                  # all reconcile logic and custom controllers
<a id=__codelineno-3-26 name=__codelineno-3-26></a>│   │   ├── ceph
<a id=__codelineno-3-27 name=__codelineno-3-27></a>│   │   ├── discover
<a id=__codelineno-3-28 name=__codelineno-3-28></a>│   │   ├── k8sutil
<a id=__codelineno-3-29 name=__codelineno-3-29></a>│   ├── util
<a id=__codelineno-3-30 name=__codelineno-3-30></a>│   └── version
<a id=__codelineno-3-31 name=__codelineno-3-31></a>└── tests
<a id=__codelineno-3-32 name=__codelineno-3-32></a>    ├── framework                 # integration test framework
<a id=__codelineno-3-33 name=__codelineno-3-33></a>    │   ├── clients
<a id=__codelineno-3-34 name=__codelineno-3-34></a>    │   ├── installer
<a id=__codelineno-3-35 name=__codelineno-3-35></a>    │   └── utils
<a id=__codelineno-3-36 name=__codelineno-3-36></a>    ├── integration               # integration test cases that will be invoked during golang testing
<a id=__codelineno-3-37 name=__codelineno-3-37></a>    └── scripts                   # scripts for setting up integration and manual testing environments
</code></pre></div></td></tr></table></div> <h2 id=development>Development<a class=headerlink href=#development title="Permanent link">&para;</a></h2> <p>To submit a change, create a branch in your fork and then submit a pull request (PR) from the branch.</p> <h3 id=design-document>Design Document<a class=headerlink href=#design-document title="Permanent link">&para;</a></h3> <p>For new features of significant scope and complexity, a design document is recommended before work begins on the implementation. Create a design document if:</p> <ul> <li>Adding a new CRD</li> <li>Adding a significant feature.</li> </ul> <p>For smaller, straightforward features and bug fixes, there is no need for a design document. Authoring a design document has many advantages:</p> <ul> <li>Forces the author to think critically about the feature and identify potential issues early in the design</li> <li>Obtain agreement amongst the community before code is written to avoid wasted effort in the wrong direction</li> <li>Newcomers may more quickly understand the feature</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Writing code to prototype the feature while working on the design may be very useful to help flesh out the approach.</p> </div> <p>A design document should be written as a markdown file in the <a href=https://github.com/rook/rook/tree/release-1.12/design>design folder</a>. Follow the process outlined in the <a href=https://github.com/rook/rook/tree/release-1.12/design/design_template.md>design template</a>. There are many examples of previous design documents in that folder. Submit a pull request for the design to be discussed and approved by the community, just like any other change to the repository.</p> <h3 id=create-a-branch>Create a Branch<a class=headerlink href=#create-a-branch title="Permanent link">&para;</a></h3> <p>From a console, create a new branch based on your fork where changes will be developed:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1>1</a></span>
<span class=normal><a href=#__codelineno-4-2>2</a></span>
<span class=normal><a href=#__codelineno-4-3>3</a></span>
<span class=normal><a href=#__codelineno-4-4>4</a></span>
<span class=normal><a href=#__codelineno-4-5>5</a></span>
<span class=normal><a href=#__codelineno-4-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=gp># </span>Update<span class=w> </span>the<span class=w> </span>remotes
<a id=__codelineno-4-2 name=__codelineno-4-2></a><span class=go>git fetch --all</span>
<a id=__codelineno-4-3 name=__codelineno-4-3></a>
<a id=__codelineno-4-4 name=__codelineno-4-4></a><span class=gp># </span>Create<span class=w> </span>a<span class=w> </span>new<span class=w> </span>branch<span class=w> </span>that<span class=w> </span>is<span class=w> </span>based<span class=w> </span>off<span class=w> </span>upstream<span class=w> </span>master.<span class=w>  </span>Give<span class=w> </span>it<span class=w> </span>a<span class=w> </span>simple,<span class=w> </span>but<span class=w> </span>descriptive<span class=w> </span>name.
<a id=__codelineno-4-5 name=__codelineno-4-5></a><span class=gp># </span>Generally<span class=w> </span>it<span class=w> </span>will<span class=w> </span>be<span class=w> </span>two<span class=w> </span>to<span class=w> </span>three<span class=w> </span>words<span class=w> </span>separated<span class=w> </span>by<span class=w> </span>dashes<span class=w> </span>and<span class=w> </span>without<span class=w> </span>numbers.
<a id=__codelineno-4-6 name=__codelineno-4-6></a><span class=go>git checkout -b feature-name upstream/master</span>
</code></pre></div></td></tr></table></div> <h3 id=updating-your-fork>Updating Your Fork<a class=headerlink href=#updating-your-fork title="Permanent link">&para;</a></h3> <p>During the development lifecycle, keep your branch(es) updated with the latest upstream master. As others on the team push changes, rebase your commits on top of the latest. This avoids unnecessary merge commits and keeps the commit history clean.</p> <p>Whenever an update is needed to the local repository, never perform a merge, <strong>always</strong> rebase. This will avoid merge commits in the git history. If there are any modified files, first stash them with <code>git stash</code>.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>1</a></span>
<span class=normal><a href=#__codelineno-5-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class=go>git fetch --all</span>
<a id=__codelineno-5-2 name=__codelineno-5-2></a><span class=go>git rebase upstream/master</span>
</code></pre></div></td></tr></table></div> <p>Rebasing is a very powerful feature of Git. You need to understand how it works to avoid risking losing your work. Read about it in the <a href=https://git-scm.com/docs/git-rebase>Git documentation</a>. Briefly, rebasing does the following:</p> <ul> <li>"Unwinds" the local commits. The local commits are removed temporarily from the history.</li> <li>The latest changes from upstream are added to the history</li> <li>The local commits are re-applied one by one</li> <li>If there are merge conflicts, there will be a prompt to fix them before continuing. Read the output closely. It will instruct how to complete the rebase.</li> <li>When rebasing is completed, all of the commits are restored in the history.</li> </ul> <h2 id=submitting-a-pull-request>Submitting a Pull Request<a class=headerlink href=#submitting-a-pull-request title="Permanent link">&para;</a></h2> <p>After a feature or bug fix is completed in your branch, open a Pull Request (PR) to the <a href=https://github.com/rook/rook>upstream Rook repository</a>.</p> <p>Before opening the PR:</p> <ul> <li>If there are code changes, add unit tests and verify that all unit tests are passing. See <a href=#unit-tests>Unit Tests</a> below on running unit tests.</li> <li>Rebase on the latest upstream changes</li> </ul> <h3 id=regression-testing>Regression Testing<a class=headerlink href=#regression-testing title="Permanent link">&para;</a></h3> <p>All pull requests must pass all continuous integration (CI) tests before they can be merged. These tests automatically run against every pull request. The results of these tests along with code review feedback determine whether your request will be merged.</p> <h2 id=unit-tests>Unit Tests<a class=headerlink href=#unit-tests title="Permanent link">&para;</a></h2> <p>From the root of your local Rook repo execute the following to run all of the unit tests:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=go>make test</span>
</code></pre></div></td></tr></table></div> <p>Unit tests for individual packages can be run with the standard <code>go test</code> command.</p> <p>To see code coverage on the packages that you changed, view the <code>coverage.html</code> in a browser to inspect your new code.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span>
<span class=normal><a href=#__codelineno-7-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=go>go test -coverprofile=coverage.out</span>
<a id=__codelineno-7-2 name=__codelineno-7-2></a><span class=go>go tool cover -html=coverage.out -o coverage.html</span>
</code></pre></div></td></tr></table></div> <h3 id=writing-unit-tests>Writing unit tests<a class=headerlink href=#writing-unit-tests title="Permanent link">&para;</a></h3> <p>Good unit tests start with easily testable code. Small chunks ("units") of code can be easily tested for every possible input. Higher-level code units that are built from smaller, already-tested units can more easily verify that the units are combined together correctly.</p> <p>Common cases that may need tests:</p> <ul> <li>the feature is enabled</li> <li>the feature is disabled</li> <li>the feature is only partially enabled, for every possible way it can be partially enabled</li> <li>every error that can be encountered during execution of the feature</li> <li>the feature can be disabled (including partially) after it was enabled</li> <li>the feature can be modified (including partially) after it was enabled</li> <li>if there is a slice/array involved, test length = 0, length = 1, length = 3, length == max, length &gt; max</li> <li>an input is not specified, for each input</li> <li>an input is specified incorrectly, for each input</li> <li>a resource the code relies on doesn't exist, for each dependency</li> </ul> <h2 id=integration-tests>Integration Tests<a class=headerlink href=#integration-tests title="Permanent link">&para;</a></h2> <p>Rook's upstream continuous integration (CI) tests will run integration tests against your changes automatically.</p> <h2 id=tmate-session>Tmate Session<a class=headerlink href=#tmate-session title="Permanent link">&para;</a></h2> <p>Integration tests will be run in Github actions. If an integration test fails, enable a tmate session to troubleshoot the issue by one of the following steps:</p> <ul> <li>Restart the CI action and click the "Enable debug logging" checkbox from the github UI, or</li> <li>Add the label <code>debug-ci</code> to the PR and push your changes again.</li> </ul> <p>See the action details for an ssh connection to the Github runner.</p> <h2 id=commit-structure>Commit structure<a class=headerlink href=#commit-structure title="Permanent link">&para;</a></h2> <p>Rook maintainers value clear, lengthy and explanatory commit messages.</p> <p>Requirements for commits:</p> <ul> <li>A commit prefix from the <a href=https://github.com/rook/rook/blob/release-1.12/.commitlintrc.json>list of known prefixes</a></li> <li>At least one paragraph that explains the original issue and the changes in the commit</li> <li>The <code>Signed-off-by</code> tag is at the end of the commit message, achieved by committing with <code>git commit -s</code></li> </ul> <p>An example acceptable commit message:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1>1</a></span>
<span class=normal><a href=#__codelineno-8-2>2</a></span>
<span class=normal><a href=#__codelineno-8-3>3</a></span>
<span class=normal><a href=#__codelineno-8-4>4</a></span>
<span class=normal><a href=#__codelineno-8-5>5</a></span>
<span class=normal><a href=#__codelineno-8-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a>component: commit title
<a id=__codelineno-8-2 name=__codelineno-8-2></a>
<a id=__codelineno-8-3 name=__codelineno-8-3></a>This is the commit message. Here I&#39;m explaining what the bug was along with its root cause.
<a id=__codelineno-8-4 name=__codelineno-8-4></a>Then I&#39;m explaining how I fixed it.
<a id=__codelineno-8-5 name=__codelineno-8-5></a>
<a id=__codelineno-8-6 name=__codelineno-8-6></a>Signed-off-by: FirstName LastName &lt;email address&gt;
</code></pre></div></td></tr></table></div> <h3 id=commit-history>Commit History<a class=headerlink href=#commit-history title="Permanent link">&para;</a></h3> <p>To prepare your branch to open a PR, the minimal number of logical commits is preferred to maintain a clean commit history. Most commonly a PR will include a single commit where all changes are squashed, although sometimes there will be multiple logical commits.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1>1</a></span>
<span class=normal><a href=#__codelineno-9-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class=gp># </span>Inspect<span class=w> </span>your<span class=w> </span>commit<span class=w> </span><span class=nb>history</span><span class=w> </span>to<span class=w> </span>determine<span class=w> </span><span class=k>if</span><span class=w> </span>you<span class=w> </span>need<span class=w> </span>to<span class=w> </span>squash<span class=w> </span>commits
<a id=__codelineno-9-2 name=__codelineno-9-2></a><span class=go>git log</span>
</code></pre></div></td></tr></table></div> <p>To squash multiple commits or make other changes to the commit history, use <code>git rebase</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span>
<span class=normal><a href=#__codelineno-10-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=gp>#</span>
<a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=gp># </span>In<span class=w> </span>this<span class=w> </span>example,<span class=w> </span>the<span class=w> </span>last<span class=w> </span><span class=m>5</span><span class=w> </span>commits<span class=w> </span>will<span class=w> </span>be<span class=w> </span>opened<span class=w> </span><span class=k>in</span><span class=w> </span>the<span class=w> </span>git<span class=w> </span>rebase<span class=w> </span>tool.
<a id=__codelineno-10-3 name=__codelineno-10-3></a><span class=go>git rebase -i HEAD~5</span>
</code></pre></div></td></tr></table></div> <p>Once your commit history is clean, ensure the branch is rebased on the <a href=#updating-your-fork>latest upstream</a> before opening the PR.</p> <h2 id=submitting>Submitting<a class=headerlink href=#submitting title="Permanent link">&para;</a></h2> <p>Go to the <a href=https://www.github.com/rook/rook>Rook github</a> to open the PR. If you have pushed recently to a branch, you will see an obvious link to open the PR. If you have not pushed recently, go to the Pull Request tab and select your fork and branch for the PR.</p> <p>After the PR is open, make changes simply by pushing new commits. The PR will track the changes in your fork and rerun the CI automatically.</p> <p>Always open a pull request against master. <strong>Never</strong> open a pull request against a released branch (e.g. release-1.2) unless working directly with a maintainer.</p> <h2 id=backporting-to-a-release-branch>Backporting to a Release Branch<a class=headerlink href=#backporting-to-a-release-branch title="Permanent link">&para;</a></h2> <p>The flow for getting a fix into a release branch is:</p> <ol> <li>Open a PR to merge changes to master following the process outlined above</li> <li>Add the backport label to that PR such as backport-release-1.11</li> <li>After the PR is merged to master, the <code>mergify</code> bot will automatically open a PR with the commits backported to the release branch</li> <li>After the CI is green and a maintainer has approved the PR, the bot will automatically merge the backport PR</li> </ol> <h2 id=debugging-issues-in-ceph-manager-modules>Debugging issues in Ceph manager modules<a class=headerlink href=#debugging-issues-in-ceph-manager-modules title="Permanent link">&para;</a></h2> <p>The Ceph manager modules are written in Python and can be individually and dynamically loaded from the manager. We can take advantage of this feature in order to test changes and to debug issues in the modules. This is just a hack to debug any modification in the manager modules.</p> <p>The <code>dashboard</code> and the <code>rook</code> orchestrator modules are the two modules most commonly have modifications that need to be tested.</p> <p>Make modifications directly in the manager module and reload:</p> <ol> <li> <p>Update the cluster so only a single mgr pod is running. Set the <code>mgr.count: 1</code> in the CephCluster CR if it is not already.</p> </li> <li> <p>Shell into the manager container:</p> </li> </ol> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=go>kubectl exec -n rook-ceph --stdin --tty $(kubectl get pod -n rook-ceph -l ceph_daemon_type=mgr,instance=a  -o jsonpath=&#39;{.items[0].metadata.name}&#39;) -c mgr  -- /bin/bash</span>
</code></pre></div></td></tr></table></div> <ol> <li>Make the modifications needed in the required manager module. The manager module source code is found in <code>/usr/share/ceph/mgr/</code>.</li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If the manager pod is restarted, all modifications made in the mgr container will be lost</p> </div> <ol> <li>Restart the modified manager module to test the modifications:</li> </ol> <p>Example for restarting the rook manager module with the <a href=https://github.com/rook/kubectl-rook-ceph>krew plugin</a>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span>
<span class=normal><a href=#__codelineno-12-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1></a><span class=go>kubectl rook-ceph ceph mgr module disable rook</span>
<a id=__codelineno-12-2 name=__codelineno-12-2></a><span class=go>kubectl rook-ceph ceph mgr module enable rook</span>
</code></pre></div></td></tr></table></div> <p>Once the module is restarted the modifications will be running in the active manager. View the manager pod log or other changed behavior to validate the changes.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../Upgrade/ceph-upgrade/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Ceph Upgrades" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Ceph Upgrades </div> </div> </a> <a href=../development-environment/ class="md-footer__link md-footer__link--next" aria-label="Next: Developer Environment" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Developer Environment </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=/ class=logo> <img src=https://rook.io/images/rook-logo-small.svg alt="rook.io logo"> </a> <p> &#169; Rook Authors 2022. Documentation distributed under <a href=https://creativecommons.org/licenses/by/4.0>CC-BY-4.0</a>. </p> <p> &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage/ >Trademark Usage</a> page. </p> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://slack.rook.io/ target=_blank rel=noopener title=slack.rook.io class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> <a href=https://twitter.com/rook_io target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://groups.google.com/forum/#!forum/rook-dev target=_blank rel=noopener title=groups.google.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M96 0C78.3 0 64 14.3 64 32v192h96v-32c0-35.3 28.7-64 64-64h224V32c0-17.7-14.3-32-32-32H96zm128 160c-17.7 0-32 14.3-32 32v32h96c35.3 0 64 28.7 64 64v128h192c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32H224zm240 64h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16zM32 256c-17.7 0-32 14.3-32 32v13l155.1 114.9c1.4 1 3.1 1.6 4.9 1.6s3.5-.6 4.9-1.6L320 301v-13c0-17.7-14.3-32-32-32H32zm288 84.8L184 441.6c-6.9 5.1-15.3 7.9-24 7.9s-17-2.8-24-7.9L0 340.8V480c0 17.7 14.3 32 32 32h256c17.7 0 32-14.3 32-32V340.8z"/></svg> </a> <a href=https://blog.rook.io/ target=_blank rel=noopener title=blog.rook.io class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262Zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.tabs.link", "instant", "navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "tabs"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest-release", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.5a2dcb6a.min.js></script> </body> </html>