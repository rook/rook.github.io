<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Rook Ceph Documentation"><meta name=author content="Rook Authors"><link href=https://rook.io/latest/Contributing/development-flow/ rel=canonical><link rel=icon href=https://rook.io/images/favicon_192x192.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.2.5+insiders-4.11.0"><title>Contributing - Rook Ceph Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.589a02ac.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.e6a45f82.min.css><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=rook-blue data-md-color-accent=deep-orange> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#contributing class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Rook Ceph Documentation" class="md-header__button md-logo" aria-label="Rook Ceph Documentation" data-md-component=logo> <img src=https://rook.io/images/rook-logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Rook Ceph Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Contributing </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=rook-blue data-md-color-accent=deep-orange aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=rook-blue data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/rook/rook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Rook </a> </li> <li class=md-tabs__item> <a href=../../ceph-configuration/ class=md-tabs__link> Configuration </a> </li> <li class=md-tabs__item> <a href=../../CRDs/ceph-client-crd/ class=md-tabs__link> CRDs </a> </li> <li class=md-tabs__item> <a href=../../Common%20Issues/ceph-common-issues/ class=md-tabs__link> Common Issues </a> </li> <li class=md-tabs__item> <a href=../development-environment/ class="md-tabs__link md-tabs__link--active"> Contributing </a> </li> <li class=md-tabs__item> <a href=../../Getting%20Started/ceph-openshift/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../Helm%20Charts/helm-ceph-cluster/ class=md-tabs__link> Helm Charts </a> </li> <li class=md-tabs__item> <a href=../../Prerequisites/authenticated-registry/ class=md-tabs__link> Prerequisites </a> </li> <li class=md-tabs__item> <a href=../../Upgrade-Guide/ceph-upgrade/ class=md-tabs__link> Upgrade Guide </a> </li> <li class=md-tabs__item> <a href=../../Usages-and-Examples/ceph-advanced-configuration/ class=md-tabs__link> Usages and Examples </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Rook Ceph Documentation" class="md-nav__button md-logo" aria-label="Rook Ceph Documentation" data-md-component=logo> <img src=https://rook.io/images/rook-logo.svg alt=logo> </a> Rook Ceph Documentation </label> <div class=md-nav__source> <a href=https://github.com/rook/rook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Rook </span> </a> </li> <li class=md-nav__item> <a href=../../ceph-configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> <span class=md-ellipsis> CRDs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CRDs data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> CRDs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CRDs/ceph-client-crd/ class=md-nav__link> <span class=md-ellipsis> Client CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-cluster-crd/ class=md-nav__link> <span class=md-ellipsis> Cluster CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-filesystem-crd/ class=md-nav__link> <span class=md-ellipsis> Shared Filesystem CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-fs-mirror-crd/ class=md-nav__link> <span class=md-ellipsis> Filesystem Mirror CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-fs-subvolumegroup/ class=md-nav__link> <span class=md-ellipsis> SubVolume Group CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-nfs-crd/ class=md-nav__link> <span class=md-ellipsis> NFS CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-object-multisite-crd/ class=md-nav__link> <span class=md-ellipsis> Object Multisite CRDs </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-object-store-crd/ class=md-nav__link> <span class=md-ellipsis> Object Store CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-object-store-user-crd/ class=md-nav__link> <span class=md-ellipsis> Object Store User CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-pool-crd/ class=md-nav__link> <span class=md-ellipsis> Block Pool CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-pool-radosnamespace-crd/ class=md-nav__link> <span class=md-ellipsis> RADOS Namespace CRD </span> </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-rbd-mirror-crd/ class=md-nav__link> <span class=md-ellipsis> RBD Mirror CRD </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> <span class=md-ellipsis> Common Issues </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Common Issues" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Common Issues </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Common%20Issues/ceph-common-issues/ class=md-nav__link> <span class=md-ellipsis> Common Issues </span> </a> </li> <li class=md-nav__item> <a href=../../Common%20Issues/ceph-disaster-recovery/ class=md-nav__link> <span class=md-ellipsis> Disaster Recovery </span> </a> </li> <li class=md-nav__item> <a href=../../Common%20Issues/ceph-mon-health/ class=md-nav__link> <span class=md-ellipsis> Monitor Health </span> </a> </li> <li class=md-nav__item> <a href=../../Common%20Issues/ceph-openshift-issues/ class=md-nav__link> <span class=md-ellipsis> OpenShift Common Issues </span> </a> </li> <li class=md-nav__item> <a href=../../Common%20Issues/ceph-osd-mgmt/ class=md-nav__link> <span class=md-ellipsis> OSD Management </span> </a> </li> <li class=md-nav__item> <a href=../../Common%20Issues/common-issues/ class=md-nav__link> <span class=md-ellipsis> Common Issues </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> <span class=md-ellipsis> Contributing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contributing data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../development-environment/ class=md-nav__link> <span class=md-ellipsis> Developer Environment </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Contributing </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Contributing </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#initial-setup class=md-nav__link> Initial Setup </a> <nav class=md-nav aria-label="Initial Setup"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-fork class=md-nav__link> Create a Fork </a> </li> <li class=md-nav__item> <a href=#clone-your-fork class=md-nav__link> Clone Your Fork </a> </li> <li class=md-nav__item> <a href=#build class=md-nav__link> Build </a> </li> <li class=md-nav__item> <a href=#development-settings class=md-nav__link> Development Settings </a> </li> <li class=md-nav__item> <a href=#add-upstream-remote class=md-nav__link> Add Upstream Remote </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layout class=md-nav__link> Layout </a> </li> <li class=md-nav__item> <a href=#development class=md-nav__link> Development </a> <nav class=md-nav aria-label=Development> <ul class=md-nav__list> <li class=md-nav__item> <a href=#design-document class=md-nav__link> Design Document </a> </li> <li class=md-nav__item> <a href=#create-a-branch class=md-nav__link> Create a Branch </a> </li> <li class=md-nav__item> <a href=#updating-your-fork class=md-nav__link> Updating Your Fork </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#submitting-a-pull-request class=md-nav__link> Submitting a Pull Request </a> <nav class=md-nav aria-label="Submitting a Pull Request"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#regression-testing class=md-nav__link> Regression Testing </a> <nav class=md-nav aria-label="Regression Testing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unit-tests class=md-nav__link> Unit Tests </a> </li> <li class=md-nav__item> <a href=#writing-unit-tests class=md-nav__link> Writing unit tests </a> </li> <li class=md-nav__item> <a href=#running-the-integration-tests class=md-nav__link> Running the Integration Tests </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#commit-structure class=md-nav__link> Commit structure </a> </li> <li class=md-nav__item> <a href=#commit-history class=md-nav__link> Commit History </a> </li> <li class=md-nav__item> <a href=#submitting class=md-nav__link> Submitting </a> </li> <li class=md-nav__item> <a href=#backport-a-fix-to-a-release-branch class=md-nav__link> Backport a Fix to a Release Branch </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../storage-providers/ class=md-nav__link> <span class=md-ellipsis> Storage Providers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Getting%20Started/ceph-openshift/ class=md-nav__link> <span class=md-ellipsis> OpenShift </span> </a> </li> <li class=md-nav__item> <a href=../../Getting%20Started/ceph-storage/ class=md-nav__link> <span class=md-ellipsis> Ceph Storage </span> </a> </li> <li class=md-nav__item> <a href=../../Getting%20Started/quickstart/ class=md-nav__link> <span class=md-ellipsis> Quickstart </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> <span class=md-ellipsis> Helm Charts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Helm Charts" data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Helm Charts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Helm%20Charts/helm-ceph-cluster/ class=md-nav__link> <span class=md-ellipsis> Ceph Cluster </span> </a> </li> <li class=md-nav__item> <a href=../../Helm%20Charts/helm-operator/ class=md-nav__link> <span class=md-ellipsis> Ceph Operator </span> </a> </li> <li class=md-nav__item> <a href=../../Helm%20Charts/helm/ class=md-nav__link> <span class=md-ellipsis> Helm Charts </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> <span class=md-ellipsis> Prerequisites </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Prerequisites data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Prerequisites/authenticated-registry/ class=md-nav__link> <span class=md-ellipsis> Authenticated Registries </span> </a> </li> <li class=md-nav__item> <a href=../../Prerequisites/pod-security-policies/ class=md-nav__link> <span class=md-ellipsis> Pod Security Policies </span> </a> </li> <li class=md-nav__item> <a href=../../Prerequisites/prerequisites/ class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9> <span class=md-ellipsis> Upgrade Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Upgrade Guide" data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Upgrade Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Upgrade-Guide/ceph-upgrade/ class=md-nav__link> <span class=md-ellipsis> Upgrades </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10 type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10> <span class=md-ellipsis> Usages and Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Usages and Examples" data-md-level=1> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Usages and Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Usages-and-Examples/ceph-advanced-configuration/ class=md-nav__link> <span class=md-ellipsis> Advanced Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/ceph-dashboard/ class=md-nav__link> <span class=md-ellipsis> Ceph Dashboard </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/ceph-examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/ceph-monitoring/ class=md-nav__link> <span class=md-ellipsis> Prometheus Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/ceph-teardown/ class=md-nav__link> <span class=md-ellipsis> Cleanup </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/ceph-toolbox/ class=md-nav__link> <span class=md-ellipsis> Toolbox </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/ceph-tools/ class=md-nav__link> <span class=md-ellipsis> Ceph Tools </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/direct-tools/ class=md-nav__link> <span class=md-ellipsis> Direct Tools </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/key-management-system/ class=md-nav__link> <span class=md-ellipsis> Key Management System </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_10 type=checkbox id=__nav_10_10> <label class=md-nav__link for=__nav_10_10> <span class=md-ellipsis> Ceph CSI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ceph CSI" data-md-level=2> <label class=md-nav__title for=__nav_10_10> <span class="md-nav__icon md-icon"></span> Ceph CSI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Usages-and-Examples/Ceph-CSI/ceph-csi-drivers/ class=md-nav__link> <span class=md-ellipsis> Ceph CSI </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/Ceph-CSI/ceph-csi-snapshot/ class=md-nav__link> <span class=md-ellipsis> Snapshots </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/Ceph-CSI/ceph-csi-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> CSI Common Issues </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/Ceph-CSI/ceph-csi-volume-clone/ class=md-nav__link> <span class=md-ellipsis> Volume clone </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_11 type=checkbox id=__nav_10_11> <label class=md-nav__link for=__nav_10_11> <span class=md-ellipsis> CephFS Filesystem Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CephFS Filesystem Storage" data-md-level=2> <label class=md-nav__title for=__nav_10_11> <span class="md-nav__icon md-icon"></span> CephFS Filesystem Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Usages-and-Examples/CephFS-Filesystem-Storage/ceph-filesystem/ class=md-nav__link> <span class=md-ellipsis> Shared Filesystem </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_12 type=checkbox id=__nav_10_12> <label class=md-nav__link for=__nav_10_12> <span class=md-ellipsis> Object Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Object Storage" data-md-level=2> <label class=md-nav__title for=__nav_10_12> <span class="md-nav__icon md-icon"></span> Object Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Usages-and-Examples/Object-Storage/ceph-object-bucket-claim/ class=md-nav__link> <span class=md-ellipsis> Object Bucket Claim </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/Object-Storage/ceph-object-bucket-notifications/ class=md-nav__link> <span class=md-ellipsis> Bucket Notifications </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/Object-Storage/ceph-object-multisite/ class=md-nav__link> <span class=md-ellipsis> Object Multisite </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/Object-Storage/ceph-object/ class=md-nav__link> <span class=md-ellipsis> Object Storage </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_13 type=checkbox id=__nav_10_13> <label class=md-nav__link for=__nav_10_13> <span class=md-ellipsis> RBD Block Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="RBD Block Storage" data-md-level=2> <label class=md-nav__title for=__nav_10_13> <span class="md-nav__icon md-icon"></span> RBD Block Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Usages-and-Examples/RBD-Block-Storage/async-disaster-recovery/ class=md-nav__link> <span class=md-ellipsis> Failover and Failback </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/RBD-Block-Storage/ceph-block/ class=md-nav__link> <span class=md-ellipsis> Block Storage </span> </a> </li> <li class=md-nav__item> <a href=../../Usages-and-Examples/RBD-Block-Storage/rbd-mirroring/ class=md-nav__link> <span class=md-ellipsis> RBD Mirroring </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#initial-setup class=md-nav__link> Initial Setup </a> <nav class=md-nav aria-label="Initial Setup"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-fork class=md-nav__link> Create a Fork </a> </li> <li class=md-nav__item> <a href=#clone-your-fork class=md-nav__link> Clone Your Fork </a> </li> <li class=md-nav__item> <a href=#build class=md-nav__link> Build </a> </li> <li class=md-nav__item> <a href=#development-settings class=md-nav__link> Development Settings </a> </li> <li class=md-nav__item> <a href=#add-upstream-remote class=md-nav__link> Add Upstream Remote </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layout class=md-nav__link> Layout </a> </li> <li class=md-nav__item> <a href=#development class=md-nav__link> Development </a> <nav class=md-nav aria-label=Development> <ul class=md-nav__list> <li class=md-nav__item> <a href=#design-document class=md-nav__link> Design Document </a> </li> <li class=md-nav__item> <a href=#create-a-branch class=md-nav__link> Create a Branch </a> </li> <li class=md-nav__item> <a href=#updating-your-fork class=md-nav__link> Updating Your Fork </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#submitting-a-pull-request class=md-nav__link> Submitting a Pull Request </a> <nav class=md-nav aria-label="Submitting a Pull Request"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#regression-testing class=md-nav__link> Regression Testing </a> <nav class=md-nav aria-label="Regression Testing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unit-tests class=md-nav__link> Unit Tests </a> </li> <li class=md-nav__item> <a href=#writing-unit-tests class=md-nav__link> Writing unit tests </a> </li> <li class=md-nav__item> <a href=#running-the-integration-tests class=md-nav__link> Running the Integration Tests </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#commit-structure class=md-nav__link> Commit structure </a> </li> <li class=md-nav__item> <a href=#commit-history class=md-nav__link> Commit History </a> </li> <li class=md-nav__item> <a href=#submitting class=md-nav__link> Submitting </a> </li> <li class=md-nav__item> <a href=#backport-a-fix-to-a-release-branch class=md-nav__link> Backport a Fix to a Release Branch </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/rook/rook/edit/master/Documentation/Contributing/development-flow.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=contributing>Contributing<a class=headerlink href=#contributing title="Permanent link">&para;</a></h1> <p>Thank you for your time and effort to help us improve Rook! Here are a few steps to get started. If you have any questions,<br> don't hesitate to reach out to us on our <a href=https://Rook-io.slack.com>Slack</a> dev channel.</p> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <ol> <li><a href=https://golang.org/dl/ >GO 1.17</a> or greater installed</li> <li>Git client installed</li> <li>GitHub account</li> </ol> <h2 id=initial-setup>Initial Setup<a class=headerlink href=#initial-setup title="Permanent link">&para;</a></h2> <h3 id=create-a-fork>Create a Fork<a class=headerlink href=#create-a-fork title="Permanent link">&para;</a></h3> <p>From your browser navigate to <a href=http://github.com/rook/rook>http://github.com/rook/rook</a> and click the "Fork" button.</p> <h3 id=clone-your-fork>Clone Your Fork<a class=headerlink href=#clone-your-fork title="Permanent link">&para;</a></h3> <p>Open a console window and do the following;</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=gp># </span>Create the rook repo path
<span class=go>mkdir -p $GOPATH/src/github.com/rook</span>

<span class=gp># </span>Navigate to the <span class=nb>local</span> repo path and clone your fork
<span class=go>cd $GOPATH/src/github.com/rook</span>

<span class=gp># </span>Clone your fork, where &lt;user&gt; is your GitHub account name
<span class=gp>$ </span>git clone https://github.com/&lt;user&gt;/rook.git
<span class=go>cd rook</span>
</code></pre></div> </td></tr></table> <h3 id=build>Build<a class=headerlink href=#build title="Permanent link">&para;</a></h3> <p>Building Rook-Ceph is simple.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=go>make</span>
</code></pre></div> </td></tr></table> <p>If you want to use <code>podman</code> instead of <code>docker</code> then uninstall <code>docker</code> packages from your machine, make will automatically pick up <code>podman</code>.</p> <h3 id=development-settings>Development Settings<a class=headerlink href=#development-settings title="Permanent link">&para;</a></h3> <p>To provide consistent whitespace and other formatting in your <code>go</code> and other source files (e.g., Markdown), it is recommended you apply<br> the following settings in your IDE:</p> <ul> <li>Format with the <code>goreturns</code> tool</li> <li>Trim trailing whitespace</li> <li>Markdown Table of Contents is correctly updated automatically</li> </ul> <p>For example, in VS Code this translates to the following settings:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;editor.formatOnSave&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;go.buildOnSave&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;package&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;go.formatTool&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;goreturns&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;files.trimTrailingWhitespace&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;files.insertFinalNewline&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;files.trimFinalNewlines&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;markdown.extension.toc.unorderedList.marker&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;*&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;markdown.extension.toc.githubCompatibility&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;markdown.extension.toc.levels&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2..2&quot;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> </td></tr></table> <p>In addition to that it is recommended to install the following extensions:</p> <ul> <li><a href="https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one">Markdown All in One by Yu Zhang - Visual Studio Marketplace</a></li> </ul> <h3 id=add-upstream-remote>Add Upstream Remote<a class=headerlink href=#add-upstream-remote title="Permanent link">&para;</a></h3> <p>First you will need to add the upstream remote to your local git:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=gp># </span>Add <span class=s1>&#39;upstream&#39;</span> to the list of remotes
<span class=go>git remote add upstream https://github.com/rook/rook.git</span>

<span class=gp># </span>Verify the remote was added
<span class=go>git remote -v</span>
</code></pre></div> </td></tr></table> <p>Now you should have at least <code>origin</code> and <code>upstream</code> remotes. You can also add other remotes to collaborate with other contributors.</p> <h2 id=layout>Layout<a class=headerlink href=#layout title="Permanent link">&para;</a></h2> <p>A source code layout is shown below, annotated with comments about the use of each important directory:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code>rook
├── build                         # build makefiles and logic to build, publish and release all Rook artifacts
├── cluster
│   ├── charts                    # Helm charts
│   │   └── rook-ceph
│   │   └── rook-ceph-cluster
│   └── examples                  # Sample yaml files for Rook cluster
│
├── cmd                           # Binaries with main entrypoint
│   ├── rook                      # Main command entry points for operators and daemons
│
├── design                        # Design documents for the various components of the Rook project
├── Documentation                 # Rook project Documentation
├── images                        # Dockerfiles to build images for all supported storage providers
│
├── pkg
│   ├── apis
│   │   ├── ceph.rook.io          # ceph specific specs for cluster, file, object
│   │   │   ├── v1
│   ├── client                    # auto-generated strongly typed client code to access Rook APIs
│   ├── clusterd
│   ├── daemon                    # daemons for each storage provider
│   │   ├── ceph
│   │   └── discover
│   ├── operator                  # all orchestration logic and custom controllers for each storage provider
│   │   ├── ceph
│   │   ├── discover
│   │   ├── k8sutil
│   │   └── test
│   ├── test
│   ├── util
│   └── version
└── tests                         # integration tests
    ├── framework                 # the Rook testing framework
    │   ├── clients               # test clients used to consume Rook resources during integration tests
    │   ├── installer             # installs Rook and its supported storage providers into integration tests environments
    │   └── utils
    ├── integration               # all test cases that will be invoked during integration testing
    └── scripts                   # scripts for setting up integration and manual testing environments
</code></pre></div> </td></tr></table> <h2 id=development>Development<a class=headerlink href=#development title="Permanent link">&para;</a></h2> <p>To add a feature or to make a bug fix, you will need to create a branch in your fork and then submit a pull request (PR) from the branch.</p> <h3 id=design-document>Design Document<a class=headerlink href=#design-document title="Permanent link">&para;</a></h3> <p>For new features of significant scope and complexity, a design document is recommended before work begins on the implementation.<br> So create a design document if:</p> <ul> <li>Adding a new CRD</li> <li>Adding a significant feature to an existing storage provider. If the design is simple enough to describe in a github issue, you likely don't need a full design doc.</li> </ul> <p>For smaller, straightforward features and bug fixes, there is no need for a design document.<br> Authoring a design document for big features has many advantages:</p> <ul> <li>Helps flesh out the approach by forcing the author to think critically about the feature and can identify potential issues early on</li> <li>Gets agreement amongst the community before code is written that could be wasted effort in the wrong direction</li> <li>Serves as an artifact of the architecture that is easier to read for visitors to the project than just the code by itself</li> </ul> <p>Note that writing code to prototype the feature while working on the design may be very useful to help flesh out the approach.</p> <p>A design document should be written as a markdown file in the <a href=https://github.com/rook/rook/tree/master/design>design folder</a>.<br> You can follow the process outlined in the <a href=https://github.com/rook/rook/tree/master/design/design_template.md>design template</a>.<br> You will see many examples of previous design documents in that folder.<br> Submit a pull request for the design to be discussed and approved by the community before being merged into master, just like any other change to the repository.</p> <p>An issue should be opened to track the work of authoring and completing the design document.<br> This issue is in addition to the issue that is tracking the implementation of the feature.<br> The <a href=https://github.com/rook/rook/labels/design>design label</a> should be assigned to the issue to denote it as such.</p> <h3 id=create-a-branch>Create a Branch<a class=headerlink href=#create-a-branch title="Permanent link">&para;</a></h3> <p>From a console, create a new branch based on your fork and start working on it:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=gp># </span>Ensure all your remotes are up to date with the latest
<span class=go>git fetch --all</span>

<span class=gp># </span>Create a new branch that is based off upstream master.  Give it a simple, but descriptive name.
<span class=gp># </span>Generally it will be two to three words separated by dashes and without numbers.
<span class=go>git checkout -b feature-name upstream/master</span>
</code></pre></div> </td></tr></table> <p>Now you are ready to make the changes and commit to your branch.</p> <h3 id=updating-your-fork>Updating Your Fork<a class=headerlink href=#updating-your-fork title="Permanent link">&para;</a></h3> <p>During the development lifecycle, you will need to keep up-to-date with the latest upstream master. As others on the team push changes, you will need to <code>rebase</code> your commits on top of the latest. This avoids unnecessary merge commits and keeps the commit history clean.</p> <p>Whenever you need to update your local repository, you never want to merge. You <strong>always</strong> will rebase. Otherwise you will end up with merge commits in the git history. If you have any modified files, you will first have to stash them (<code>git stash save -u "&lt;some description&gt;"</code>).</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=go>git fetch --all</span>
<span class=go>git rebase upstream/master</span>
</code></pre></div> </td></tr></table> <p>Rebasing is a very powerful feature of Git. You need to understand how it works or else you will risk losing your work. Read about it in the <a href=https://git-scm.com/docs/git-rebase>Git documentation</a>, it will be well worth it. In a nutshell, rebasing does the following:</p> <ul> <li>"Unwinds" your local commits. Your local commits are removed temporarily from the history.</li> <li>The latest changes from upstream are added to the history</li> <li>Your local commits are re-applied one by one</li> <li>If there are merge conflicts, you will be prompted to fix them before continuing. Read the output closely. It will tell you how to complete the rebase.</li> <li>When done rebasing, you will see all of your commits in the history.</li> </ul> <h2 id=submitting-a-pull-request>Submitting a Pull Request<a class=headerlink href=#submitting-a-pull-request title="Permanent link">&para;</a></h2> <p>Once you have implemented the feature or bug fix in your branch, you will open a Pull Request (PR)<br> to the <a href=https://github.com/rook/rook>upstream Rook repository</a>. Before opening the PR ensure you<br> have added unit tests and all unit tests are passing. Please clean your commit history and rebase on<br> the latest upstream changes.</p> <p>See <a href=#unit-tests>Unit Tests</a> below for instructions on how to run unit tests.</p> <p>In order to open a pull request (PR) it is required to be up to date with the latest changes upstream. If other commits are pushed upstream before your PR is merged, you will also need to rebase again before it will be merged.</p> <h3 id=regression-testing>Regression Testing<a class=headerlink href=#regression-testing title="Permanent link">&para;</a></h3> <p>All pull requests must pass the unit and integration tests before they can be merged. These tests<br> automatically run against every pull request as a part of Rook's continuous integration (CI)<br> process. The results of these tests along with code reviews and other criteria determine whether<br> your request will be accepted into the <code>rook/rook</code> repo.</p> <h4 id=unit-tests>Unit Tests<a class=headerlink href=#unit-tests title="Permanent link">&para;</a></h4> <p>From the root of your local Rook repo execute the following to run all of the unit tests:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=go>make test</span>
</code></pre></div> </td></tr></table> <p>Unit tests for individual packages can be run with the standard <code>go test</code> command. Before you open a PR, confirm that you have sufficient code coverage on the packages that you changed. View the <code>coverage.html</code> in a browser to inspect your new code.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=go>go test -coverprofile=coverage.out</span>
<span class=go>go tool cover -html=coverage.out -o coverage.html</span>
</code></pre></div> </td></tr></table> <h4 id=writing-unit-tests>Writing unit tests<a class=headerlink href=#writing-unit-tests title="Permanent link">&para;</a></h4> <p>There is no one-size-fits-all approach to unit testing, but we attempt to provide good tips for<br> writing unit tests for Rook below.</p> <p>Unit tests should help people reading and reviewing the code understand the intended behavior of the<br> code.</p> <p>Good unit tests start with easily testable code. Small chunks ("units") of code can be easily tested<br> for every possible input. Higher-level code units that are built from smaller, already-tested units<br> can more easily verify that the units are combined together correctly.</p> <p>Common cases that may need tests: * the feature is enabled * the feature is disabled * the feature is only partially enabled, for every possible way it can be partially enabled * every error that can be encountered during execution of the feature * the feature can be disabled (including partially) after it was enabled * the feature can be modified (including partially) after it was enabled * if there is a slice/array involved, test length = 0, length = 1, length = 3, length == max, length &gt; max * an input is not specified, for each input * an input is specified incorrectly, for each input * a resource the code relies on doesn't exist, for each dependency</p> <h4 id=running-the-integration-tests>Running the Integration Tests<a class=headerlink href=#running-the-integration-tests title="Permanent link">&para;</a></h4> <p>Rook's upstream continuous integration (CI) tests will run integration tests against your changes<br> automatically.</p> <p>You do not need to run these tests locally, but you may if you like. For instructions on how to do<br> so, follow the <a href=https://github.com/rook/rook/blob/master/tests/README.md>test instructions</a>.</p> <h3 id=commit-structure>Commit structure<a class=headerlink href=#commit-structure title="Permanent link">&para;</a></h3> <p>Rook maintainers value clear, lengthy and explanatory commit messages. So by default each of your commits must:</p> <ul> <li>be prefixed by the component it's affecting, if Ceph, then the title of the commit message should be <code>ceph: my commit title</code>. If not the commit-lint bot will complain.</li> <li>contain a commit message which explains the original issue and how it was fixed if a bug.<br> If a feature it is a full description of the new functionality.</li> <li>refer to the issue it's closing, this is mandatory when fixing a bug</li> <li>have a sign-off, this is achieved by adding <code>-s</code> when committing so in practice run <code>git commit -s</code>. If not the DCO bot will complain.<br> If you forgot to add the sign-off you can also amend a previous commit with the sign-off by running <code>git commit --amend -s</code>.<br> If you've pushed your changes to GitHub already you'll need to force push your branch with <code>git push -f</code>.</li> </ul> <p>Here is an example of an acceptable commit message:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code>component: commit title

This is the commit message, here I&#39;m explaining, what the bug was along with its root cause.
Then I&#39;m explaining how I fixed it.

Closes: https://github.com/rook/rook/issues/&lt;NUMBER&gt;
Signed-off-by: First Name Last Name &lt;email address&gt;
</code></pre></div> </td></tr></table> <p>The <code>component</code> <strong>MUST</strong> be in the <a href=https://github.com/rook/rook/blob/master/.commitlintrc.json>list checked by the CI</a>.</p> <p>Note: sometimes you will feel like there is not so much to say, for instance if you are fixing a typo in a text.<br> In that case, it is acceptable to shorten the commit message.<br> Also, you don't always need to close an issue, again for a very small fix.</p> <p>You can read more about <a href=https://www.conventionalcommits.org/en/v1.0.0-beta.2/ >conventional commits</a>.</p> <h3 id=commit-history>Commit History<a class=headerlink href=#commit-history title="Permanent link">&para;</a></h3> <p>To prepare your branch to open a PR, you will need to have the minimal number of logical commits so we can maintain<br> a clean commit history. Most commonly a PR will include a single commit where all changes are squashed, although<br> sometimes there will be multiple logical commits.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=gp># </span>Inspect your commit <span class=nb>history</span> to determine <span class=k>if</span> you need to squash commits
<span class=go>git log</span>

<span class=gp># </span>Rebase the commits and edit, squash, or even reorder them as you determine will keep the <span class=nb>history</span> clean.
<span class=gp># </span>In this example, the last <span class=m>5</span> commits will be opened <span class=k>in</span> the git rebase tool.
<span class=go>git rebase -i HEAD~5</span>
</code></pre></div> </td></tr></table> <p>Once your commit history is clean, ensure you have based on the <a href=#Updating-your-fork>latest upstream</a> before you open the PR.</p> <h3 id=submitting>Submitting<a class=headerlink href=#submitting title="Permanent link">&para;</a></h3> <p>Go to the <a href=https://www.github.com/rook/rook>Rook github</a> to open the PR. If you have pushed recently, you should see an obvious link to open the PR. If you have not pushed recently, go to the Pull Request tab and select your fork and branch for the PR.</p> <p>After the PR is open, you can make changes simply by pushing new commits. Your PR will track the changes in your fork and update automatically.</p> <p><strong>Never</strong> open a pull request against a released branch (e.g. release-1.2) unless the content you are editing is gone from master and only exists in the released branch.<br> By default, you should always open a pull request against master.</p> <h3 id=backport-a-fix-to-a-release-branch>Backport a Fix to a Release Branch<a class=headerlink href=#backport-a-fix-to-a-release-branch title="Permanent link">&para;</a></h3> <p>The flow for getting a fix into a release branch is:</p> <ol> <li>Open a PR to merge the changes to master following the process outlined above.</li> <li>Add the backport label to that PR such as backport-release-1.7</li> <li>After your PR is merged to master, the mergify bot will automatically open a PR with your commits backported to the release branch</li> <li>If there are any conflicts you will need to resolve them by pulling the branch, resolving the conflicts and force push back the branch</li> <li>After the CI is green, the bot will automatically merge the backport PR.</li> </ol> </article> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> </div> <a href=# class="md-top md-top--hidden md-icon" data-md-component=top> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../development-environment/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Developer Environment" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Developer Environment </div> </div> </a> <a href=../storage-providers/ class="md-footer__link md-footer__link--next" aria-label="Next: Storage Providers" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Storage Providers </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=/ class=logo> <img src=/images/rook-logo-small.svg alt=rook.io> </a> <p> &#169; Rook Authors 2022. Documentation distributed under <a href=https://creativecommons.org/licenses/by/4.0>CC-BY-4.0</a>. </p> <p> &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage/ >Trademark Usage</a> page. </p> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.tabs.link", "instant", "navigation.tabs", "navigation.top", "navigation.tracking", "privacy", "search.highlight", "search.share", "search.suggest", "tabs"], "search": "../../assets/javascripts/workers/search.5c9dbbf3.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.10bf1588.min.js></script> </body> </html>