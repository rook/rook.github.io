<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Rook Ceph Documentation"><meta name=author content="Rook Authors"><link href=https://rook.io/latest/Upgrade/ceph-upgrade/ rel=canonical><link rel=icon href=https://rook.io/images/favicon_192x192.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.2.14"><title>Rook Ceph Upgrades - Rook Ceph Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.3de6f41f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cc9b2e1e.min.css><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=rook-blue data-md-color-accent=deep-orange> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#supported-versions class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> This document is for a development version of Rook. <a href=../../..> <strong>Click here to go to latest release documentation.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Rook Ceph Documentation" class="md-header__button md-logo" aria-label="Rook Ceph Documentation" data-md-component=logo> <img src=https://rook.io/images/rook-logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Rook Ceph Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Rook Ceph Upgrades </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=rook-blue data-md-color-accent=deep-orange aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=rook-blue data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/rook/rook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Rook </a> </li> <li class=md-tabs__item> <a href=../../Getting-Started/Prerequisites/prerequisites/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../Helm-Charts/helm-charts/ class=md-tabs__link> Helm Charts </a> </li> <li class=md-tabs__item> <a href=../../Storage-Configuration/ceph-dashboard/ class=md-tabs__link> Storage Configuration </a> </li> <li class=md-tabs__item> <a href=../../CRDs/ceph-cluster-crd/ class=md-tabs__link> CRDs </a> </li> <li class=md-tabs__item> <a href=../../Troubleshooting/common-issues/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=./ class="md-tabs__link md-tabs__link--active"> Upgrade </a> </li> <li class=md-tabs__item> <a href=../../Contributing/development-flow/ class=md-tabs__link> Contributing </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Rook Ceph Documentation" class="md-nav__button md-logo" aria-label="Rook Ceph Documentation" data-md-component=logo> <img src=https://rook.io/images/rook-logo.svg alt=logo> </a> Rook Ceph Documentation </label> <div class=md-nav__source> <a href=https://github.com/rook/rook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Rook </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 data-md-state=indeterminate type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1 data-md-state=indeterminate type=checkbox id=__nav_2_1 checked> <label class=md-nav__link for=__nav_2_1> Prerequisites <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Prerequisites data-md-level=2> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Getting-Started/Prerequisites/prerequisites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/Prerequisites/authenticated-registry/ class=md-nav__link> Authenticated Container Registries </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/Prerequisites/pod-security-policies/ class=md-nav__link> Pod Security Policies </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../Getting-Started/quickstart/ class=md-nav__link> Ceph Quickstart </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/ceph-storage/ class=md-nav__link> Ceph Storage Architecture </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/example-configurations/ class=md-nav__link> Example Configurations </a> </li> <li class=md-nav__item> <a href=../../Getting-Started/ceph-openshift/ class=md-nav__link> OpenShift </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 data-md-state=indeterminate type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Helm Charts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Helm Charts" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Helm Charts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Helm-Charts/helm-charts/ class=md-nav__link> Helm Charts Overview </a> </li> <li class=md-nav__item> <a href=../../Helm-Charts/operator-chart/ class=md-nav__link> Ceph Operator Helm Chart </a> </li> <li class=md-nav__item> <a href=../../Helm-Charts/ceph-cluster-chart/ class=md-nav__link> Ceph Cluster Helm Chart </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 data-md-state=indeterminate type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Storage Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Storage Configuration" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Storage Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/ceph-dashboard/ class=md-nav__link> Ceph Dashboard </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/ceph-monitoring/ class=md-nav__link> Prometheus Monitoring </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/key-management-system/ class=md-nav__link> Key Management System </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/ceph-toolbox/ class=md-nav__link> Toolbox </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/ceph-teardown/ class=md-nav__link> Cleanup </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 data-md-state=indeterminate type=checkbox id=__nav_4_6 checked> <label class=md-nav__link for=__nav_4_6> Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Advanced data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Advanced/ceph-configuration/ class=md-nav__link> Ceph Configuration </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Advanced/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Advanced/ceph-osd-mgmt/ class=md-nav__link> Ceph OSD Management </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Advanced/ceph-mon-health/ class=md-nav__link> Monitor Health </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_7 data-md-state=indeterminate type=checkbox id=__nav_4_7 checked> <label class=md-nav__link for=__nav_4_7> Block Storage (RBD) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Block Storage (RBD)" data-md-level=2> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Block Storage (RBD) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Block-Storage-RBD/block-storage/ class=md-nav__link> Block Storage Overview </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Block-Storage-RBD/rbd-mirroring/ class=md-nav__link> RBD Mirroring </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Block-Storage-RBD/rbd-async-disaster-recovery-failover-failback/ class=md-nav__link> RBD Asynchronous DR Failover and Failback </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_8 data-md-state=indeterminate type=checkbox id=__nav_4_8 checked> <label class=md-nav__link for=__nav_4_8> Ceph CSI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ceph CSI" data-md-level=2> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> Ceph CSI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Ceph-CSI/ceph-csi-drivers/ class=md-nav__link> Ceph CSI Drivers </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Ceph-CSI/ceph-csi-snapshot/ class=md-nav__link> Snapshots </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Ceph-CSI/ceph-csi-volume-clone/ class=md-nav__link> Volume clone </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_9 data-md-state=indeterminate type=checkbox id=__nav_4_9 checked> <label class=md-nav__link for=__nav_4_9> Object Storage (RGW) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Object Storage (RGW)" data-md-level=2> <label class=md-nav__title for=__nav_4_9> <span class="md-nav__icon md-icon"></span> Object Storage (RGW) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Object-Storage-RGW/object-storage/ class=md-nav__link> Object Storage Overview </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Object-Storage-RGW/ceph-object-bucket-claim/ class=md-nav__link> Bucket Claim </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Object-Storage-RGW/ceph-object-bucket-notifications/ class=md-nav__link> Ceph Object Bucket Notifications </a> </li> <li class=md-nav__item> <a href=../../Storage-Configuration/Object-Storage-RGW/ceph-object-multisite/ class=md-nav__link> Ceph Object Multisite </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_10 data-md-state=indeterminate type=checkbox id=__nav_4_10 checked> <label class=md-nav__link for=__nav_4_10> Shared Filesystem (CephFS) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Shared Filesystem (CephFS)" data-md-level=2> <label class=md-nav__title for=__nav_4_10> <span class="md-nav__icon md-icon"></span> Shared Filesystem (CephFS) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Storage-Configuration/Shared-Filesystem-CephFS/filesystem-storage/ class=md-nav__link> Filesystem Storage Overview </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 data-md-state=indeterminate type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> CRDs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CRDs data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> CRDs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CRDs/ceph-cluster-crd/ class=md-nav__link> Cluster CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-block-pool-crd/ class=md-nav__link> Block Pool CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-client-crd/ class=md-nav__link> Client CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-filesystem-crd/ class=md-nav__link> Filesystem CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-fs-mirror-crd/ class=md-nav__link> FilesystemMirror CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-fs-subvolumegroup/ class=md-nav__link> CephFilesystemSubVolumeGroup CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-nfs-crd/ class=md-nav__link> NFS Server CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-object-multisite-crd/ class=md-nav__link> Object Multisite CRDs </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-object-store-crd/ class=md-nav__link> Object Store CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-object-store-user-crd/ class=md-nav__link> Object Store User CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-pool-radosnamespace-crd/ class=md-nav__link> Block Pool RADOS Namespace CRD </a> </li> <li class=md-nav__item> <a href=../../CRDs/ceph-rbd-mirror-crd/ class=md-nav__link> RBD Mirror CRD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 data-md-state=indeterminate type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> Troubleshooting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Troubleshooting data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Troubleshooting/common-issues/ class=md-nav__link> Common Issues </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/ceph-common-issues/ class=md-nav__link> Ceph Common Issues </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/ceph-csi-common-issues/ class=md-nav__link> CSI Common Issues </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/openshift-common-issues/ class=md-nav__link> OpenShift Common Issues </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/disaster-recovery/ class=md-nav__link> Disaster Recovery </a> </li> <li class=md-nav__item> <a href=../../Troubleshooting/direct-tools/ class=md-nav__link> Direct Tools </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7 checked> <label class=md-nav__link for=__nav_7> Upgrade <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Upgrade data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Rook Ceph Upgrades <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Rook Ceph Upgrades </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#supported-versions class=md-nav__link> Supported Versions </a> </li> <li class=md-nav__item> <a href=#breaking-changes-in-this-release class=md-nav__link> Breaking changes in this release </a> </li> <li class=md-nav__item> <a href=#considerations class=md-nav__link> Considerations </a> </li> <li class=md-nav__item> <a href=#patch-release-upgrades class=md-nav__link> Patch Release Upgrades </a> </li> <li class=md-nav__item> <a href=#helm class=md-nav__link> Helm </a> </li> <li class=md-nav__item> <a href=#upgrading-from-v18-to-v19 class=md-nav__link> Upgrading from v1.8 to v1.9 </a> <nav class=md-nav aria-label="Upgrading from v1.8 to v1.9"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#health-verification class=md-nav__link> Health Verification </a> <nav class=md-nav aria-label="Health Verification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pods-all-running class=md-nav__link> Pods all Running </a> </li> <li class=md-nav__item> <a href=#status-output class=md-nav__link> Status Output </a> </li> <li class=md-nav__item> <a href=#container-versions class=md-nav__link> Container Versions </a> </li> <li class=md-nav__item> <a href=#rook-volume-health class=md-nav__link> Rook Volume Health </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rook-operator-upgrade-process class=md-nav__link> Rook Operator Upgrade Process </a> <nav class=md-nav aria-label="Rook Operator Upgrade Process"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-update-common-resources-and-crds class=md-nav__link> 1. Update common resources and CRDs </a> <nav class=md-nav aria-label="1. Update common resources and CRDs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#updates-for-optional-resources class=md-nav__link> Updates for optional resources </a> </li> <li class=md-nav__item> <a href=#prometheus class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=#mds-liveness-and-startup-probes class=md-nav__link> MDS liveness and startup probes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-update-ceph-csi-versions class=md-nav__link> 2. Update Ceph CSI versions </a> </li> <li class=md-nav__item> <a href=#3-update-the-rook-operator class=md-nav__link> 3. Update the Rook Operator </a> </li> <li class=md-nav__item> <a href=#4-wait-for-the-upgrade-to-complete class=md-nav__link> 4. Wait for the upgrade to complete </a> </li> <li class=md-nav__item> <a href=#5-verify-the-updated-cluster class=md-nav__link> 5. Verify the updated cluster </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ceph-version-upgrades class=md-nav__link> Ceph Version Upgrades </a> <nav class=md-nav aria-label="Ceph Version Upgrades"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rename-cephblockpool-device_health_metrics-pool-when-upgrading-to-quincy-v17 class=md-nav__link> Rename CephBlockPool device_health_metrics pool when upgrading to Quincy v17 </a> </li> <li class=md-nav__item> <a href=#important-consideration-for-cephnfs-users class=md-nav__link> Important consideration for CephNFS users </a> </li> <li class=md-nav__item> <a href=#ceph-images class=md-nav__link> Ceph images </a> </li> <li class=md-nav__item> <a href=#example-upgrade-to-ceph-pacific class=md-nav__link> Example upgrade to Ceph Pacific </a> <nav class=md-nav aria-label="Example upgrade to Ceph Pacific"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-update-the-main-ceph-daemons class=md-nav__link> 1. Update the main Ceph daemons </a> </li> <li class=md-nav__item> <a href=#2-wait-for-the-daemon-pod-updates-to-complete class=md-nav__link> 2. Wait for the daemon pod updates to complete </a> </li> <li class=md-nav__item> <a href=#3-verify-the-updated-cluster class=md-nav__link> 3. Verify the updated cluster </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#csi-version class=md-nav__link> CSI Version </a> <nav class=md-nav aria-label="CSI Version"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#use-default-images class=md-nav__link> Use default images </a> </li> <li class=md-nav__item> <a href=#verifying-updates class=md-nav__link> Verifying updates </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 data-md-state=indeterminate type=checkbox id=__nav_8 checked> <label class=md-nav__link for=__nav_8> Contributing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contributing data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Contributing/development-flow/ class=md-nav__link> Development Flow </a> </li> <li class=md-nav__item> <a href=../../Contributing/development-environment/ class=md-nav__link> Developer Environment </a> </li> <li class=md-nav__item> <a href=../../Contributing/documentation/ class=md-nav__link> Documentation </a> </li> <li class=md-nav__item> <a href=../../Contributing/storage-providers/ class=md-nav__link> Storage Providers </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#supported-versions class=md-nav__link> Supported Versions </a> </li> <li class=md-nav__item> <a href=#breaking-changes-in-this-release class=md-nav__link> Breaking changes in this release </a> </li> <li class=md-nav__item> <a href=#considerations class=md-nav__link> Considerations </a> </li> <li class=md-nav__item> <a href=#patch-release-upgrades class=md-nav__link> Patch Release Upgrades </a> </li> <li class=md-nav__item> <a href=#helm class=md-nav__link> Helm </a> </li> <li class=md-nav__item> <a href=#upgrading-from-v18-to-v19 class=md-nav__link> Upgrading from v1.8 to v1.9 </a> <nav class=md-nav aria-label="Upgrading from v1.8 to v1.9"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#health-verification class=md-nav__link> Health Verification </a> <nav class=md-nav aria-label="Health Verification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pods-all-running class=md-nav__link> Pods all Running </a> </li> <li class=md-nav__item> <a href=#status-output class=md-nav__link> Status Output </a> </li> <li class=md-nav__item> <a href=#container-versions class=md-nav__link> Container Versions </a> </li> <li class=md-nav__item> <a href=#rook-volume-health class=md-nav__link> Rook Volume Health </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rook-operator-upgrade-process class=md-nav__link> Rook Operator Upgrade Process </a> <nav class=md-nav aria-label="Rook Operator Upgrade Process"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-update-common-resources-and-crds class=md-nav__link> 1. Update common resources and CRDs </a> <nav class=md-nav aria-label="1. Update common resources and CRDs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#updates-for-optional-resources class=md-nav__link> Updates for optional resources </a> </li> <li class=md-nav__item> <a href=#prometheus class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=#mds-liveness-and-startup-probes class=md-nav__link> MDS liveness and startup probes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-update-ceph-csi-versions class=md-nav__link> 2. Update Ceph CSI versions </a> </li> <li class=md-nav__item> <a href=#3-update-the-rook-operator class=md-nav__link> 3. Update the Rook Operator </a> </li> <li class=md-nav__item> <a href=#4-wait-for-the-upgrade-to-complete class=md-nav__link> 4. Wait for the upgrade to complete </a> </li> <li class=md-nav__item> <a href=#5-verify-the-updated-cluster class=md-nav__link> 5. Verify the updated cluster </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ceph-version-upgrades class=md-nav__link> Ceph Version Upgrades </a> <nav class=md-nav aria-label="Ceph Version Upgrades"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rename-cephblockpool-device_health_metrics-pool-when-upgrading-to-quincy-v17 class=md-nav__link> Rename CephBlockPool device_health_metrics pool when upgrading to Quincy v17 </a> </li> <li class=md-nav__item> <a href=#important-consideration-for-cephnfs-users class=md-nav__link> Important consideration for CephNFS users </a> </li> <li class=md-nav__item> <a href=#ceph-images class=md-nav__link> Ceph images </a> </li> <li class=md-nav__item> <a href=#example-upgrade-to-ceph-pacific class=md-nav__link> Example upgrade to Ceph Pacific </a> <nav class=md-nav aria-label="Example upgrade to Ceph Pacific"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-update-the-main-ceph-daemons class=md-nav__link> 1. Update the main Ceph daemons </a> </li> <li class=md-nav__item> <a href=#2-wait-for-the-daemon-pod-updates-to-complete class=md-nav__link> 2. Wait for the daemon pod updates to complete </a> </li> <li class=md-nav__item> <a href=#3-verify-the-updated-cluster class=md-nav__link> 3. Verify the updated cluster </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#csi-version class=md-nav__link> CSI Version </a> <nav class=md-nav aria-label="CSI Version"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#use-default-images class=md-nav__link> Use default images </a> </li> <li class=md-nav__item> <a href=#verifying-updates class=md-nav__link> Verifying updates </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/rook/rook/edit/master/Documentation/Upgrade/ceph-upgrade.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1>Rook Ceph Upgrades</h1> <p>This guide will walk you through the steps to upgrade the software in a Rook-Ceph cluster from one version to the next. This includes both the Rook-Ceph operator software itself as well as the Ceph cluster software.</p> <p>Upgrades for both the operator and for Ceph are nearly entirely automated save for where Rook's permissions need to be explicitly updated by an admin or when incompatibilities need to be addressed manually due to customizations.</p> <p>We welcome feedback and opening issues!</p> <h2 id=supported-versions>Supported Versions<a class=headerlink href=#supported-versions title="Permanent link">&para;</a></h2> <p>This guide is for upgrading from <strong>Rook v1.8.x to Rook v1.9.x</strong>.</p> <p>Please refer to the upgrade guides from previous releases for supported upgrade paths. Rook upgrades are only supported between official releases. Upgrades to and from <code>master</code> are not supported.</p> <p>For a guide to upgrade previous versions of Rook, please refer to the version of documentation for those releases.</p> <ul> <li><a href=https://rook.io/docs/rook/v1.8/ceph-upgrade.html>Upgrade 1.7 to 1.8</a></li> <li><a href=https://rook.io/docs/rook/v1.7/ceph-upgrade.html>Upgrade 1.6 to 1.7</a></li> <li><a href=https://rook.io/docs/rook/v1.6/ceph-upgrade.html>Upgrade 1.5 to 1.6</a></li> <li><a href=https://rook.io/docs/rook/v1.5/ceph-upgrade.html>Upgrade 1.4 to 1.5</a></li> <li><a href=https://rook.io/docs/rook/v1.4/ceph-upgrade.html>Upgrade 1.3 to 1.4</a></li> <li><a href=https://rook.io/docs/rook/v1.3/ceph-upgrade.html>Upgrade 1.2 to 1.3</a></li> <li><a href=https://rook.io/docs/rook/v1.2/ceph-upgrade.html>Upgrade 1.1 to 1.2</a></li> <li><a href=https://rook.io/docs/rook/v1.1/ceph-upgrade.html>Upgrade 1.0 to 1.1</a></li> <li><a href=https://rook.io/docs/rook/v1.0/ceph-upgrade.html>Upgrade 0.9 to 1.0</a></li> <li><a href=https://rook.io/docs/rook/v0.9/ceph-upgrade.html>Upgrade 0.8 to 0.9</a></li> <li><a href=https://rook.io/docs/rook/v0.8/upgrade.html>Upgrade 0.7 to 0.8</a></li> <li><a href=https://rook.io/docs/rook/v0.7/upgrade.html>Upgrade 0.6 to 0.7</a></li> <li><a href=https://rook.io/docs/rook/v0.6/upgrade.html>Upgrade 0.5 to 0.6</a></li> </ul> <h2 id=breaking-changes-in-this-release>Breaking changes in this release<a class=headerlink href=#breaking-changes-in-this-release title="Permanent link">&para;</a></h2> <ul> <li> <p>Helm charts now define default resource requests and limits for Rook-Ceph Pods. If you use Helm, ensure you have defined an override for these in your <code>values.yaml</code> if you don't wish to use the recommended defaults. Setting resource requests and limits could mean that Kubernetes will not allow Pods to be scheduled in some cases. If sufficient resources are not available, you can reduce or remove the requests and limits.</p> </li> <li> <p>MDS liveness and startup probes are now configured by the CephFilesystem resource instead of CephCluster. Upgrade instructions are <a href=#mds-liveness-and-startup-probes>below</a>.</p> </li> <li> <p>Rook no longer deploys Prometheus rules from the operator. If you have been relying on Rook to deploy prometheus rules in the past, please follow the upgrade instructions <a href=#prometheus>below</a>.</p> </li> <li> <p>Due to a number of Ceph issues and changes, Rook officially only supports Ceph v16.2.7 or higher for CephNFS. If you are using an earlier version, upgrade your Ceph version following the advice given in Rook's <a href=https://rook.github.io/docs/rook/v1.8/ceph-nfs-crd.html>v1.8 NFS docs</a>.</p> </li> </ul> <h2 id=considerations>Considerations<a class=headerlink href=#considerations title="Permanent link">&para;</a></h2> <p>With this upgrade guide, there are a few notes to consider:</p> <ul> <li><strong>WARNING</strong>: Upgrading a Rook cluster is not without risk. There may be unexpected issues or obstacles that damage the integrity and health of your storage cluster, including data loss.</li> <li>The Rook cluster's storage may be unavailable for short periods during the upgrade process for both Rook operator updates and for Ceph version updates.</li> <li>We recommend that you read this document in full before you undertake a Rook cluster upgrade.</li> </ul> <h2 id=patch-release-upgrades>Patch Release Upgrades<a class=headerlink href=#patch-release-upgrades title="Permanent link">&para;</a></h2> <p>Unless otherwise noted due to extenuating requirements, upgrades from one patch release of Rook to another are as simple as updating the common resources and the image of the Rook operator. For example, when Rook v1.9.1 is released, the process of updating from v1.9.0 is as simple as running the following:</p> <p>First get the latest common resources manifests that contain the latest changes for Rook v1.9.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span>
<span class=normal><a href=#__codelineno-0-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=go>git clone --single-branch --depth=1 --branch v1.9.1 https://github.com/rook/rook.git</span>
<a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=go>cd rook/deploy/examples</span>
</code></pre></div></td></tr></table></div> <p>If you have deployed the Rook Operator or the Ceph cluster into a different namespace than <code>rook-ceph</code>, see the <a href=#1-update-common-resources-and-crds>Update common resources and CRDs</a> section for instructions on how to change the default namespaces in <code>common.yaml</code>.</p> <p>Then apply the latest changes from v1.9 and update the Rook Operator image.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=go>kubectl apply -f common.yaml -f crds.yaml</span>
<a id=__codelineno-1-2 name=__codelineno-1-2></a><span class=go>kubectl -n rook-ceph set image deploy/rook-ceph-operator rook-ceph-operator=rook/ceph:v1.9.1</span>
</code></pre></div></td></tr></table></div> <p>As exemplified above, it is a good practice to update Rook-Ceph common resources from the example manifests before any update. The common resources and CRDs might not be updated with every release, but K8s will only apply updates to the ones that changed.</p> <p>Also update optional resources like Prometheus monitoring noted more fully in the <a href=#updates-for-optional-resources>upgrade section below</a>.</p> <h2 id=helm>Helm<a class=headerlink href=#helm title="Permanent link">&para;</a></h2> <ul> <li>The minimum supported Helm version is <strong>v3.2.0</strong></li> </ul> <p>If you have installed Rook via the Helm chart, Helm will handle some details of the upgrade for you. The upgrade steps in this guide will clarify if Helm manages the step for you.</p> <p>The <code>rook-ceph</code> helm chart upgrade performs the Rook upgrade. The <code>rook-ceph-cluster</code> helm chart upgrade performs a <a href=#ceph-version-upgrades>Ceph upgrade</a> if the Ceph image is updated.</p> <h2 id=upgrading-from-v18-to-v19>Upgrading from v1.8 to v1.9<a class=headerlink href=#upgrading-from-v18-to-v19 title="Permanent link">&para;</a></h2> <p><strong>Rook releases from master are expressly unsupported.</strong> It is strongly recommended that you use <a href=https://github.com/rook/rook/releases>official releases</a> of Rook. Unreleased versions from the master branch are subject to changes and incompatibilities that will not be supported in the official releases. Builds from the master branch can have functionality changed or removed at any time without compatibility support and without prior notice.</p> <h3 id=prerequisites><strong>Prerequisites</strong><a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h3> <p>We will do all our work in the Ceph example manifests directory.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=go>cd $YOUR_ROOK_REPO/deploy/examples/</span>
</code></pre></div></td></tr></table></div> <p>Unless your Rook cluster was created with customized namespaces, namespaces for Rook clusters are likely to be:</p> <ul> <li>Clusters created by v0.7 or earlier: <code>rook-system</code> and <code>rook</code></li> <li>Clusters created in v0.8 or v0.9: <code>rook-ceph-system</code> and <code>rook-ceph</code></li> <li>Clusters created in v1.0 or newer: only <code>rook-ceph</code></li> </ul> <p>With this guide, we do our best not to assume the namespaces in your cluster. To make things as easy as possible, modify and use the below snippet to configure your environment. We will use these environment variables throughout this document.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1>1</a></span>
<span class=normal><a href=#__codelineno-3-2>2</a></span>
<span class=normal><a href=#__codelineno-3-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1></a><span class=gp># </span>Parameterize the environment
<a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=go>export ROOK_OPERATOR_NAMESPACE=&quot;rook-ceph&quot;</span>
<a id=__codelineno-3-3 name=__codelineno-3-3></a><span class=go>export ROOK_CLUSTER_NAMESPACE=&quot;rook-ceph&quot;</span>
</code></pre></div></td></tr></table></div> <p>In order to successfully upgrade a Rook cluster, the following prerequisites must be met:</p> <ul> <li>The cluster should be in a healthy state with full functionality. Review the <a href=#health-verification>health verification section</a> in order to verify your cluster is in a good starting state.</li> <li>All pods consuming Rook storage should be created, running, and in a steady state. No Rook persistent volumes should be in the act of being created or deleted.</li> </ul> <h2 id=health-verification>Health Verification<a class=headerlink href=#health-verification title="Permanent link">&para;</a></h2> <p>Before we begin the upgrade process, let's first review some ways that you can verify the health of your cluster, ensuring that the upgrade is going smoothly after each step. Most of the health verification checks for your cluster during the upgrade process can be performed with the Rook toolbox. For more information about how to run the toolbox, please visit the <a href=../../Storage-Configuration/ceph-toolbox/ >Rook toolbox readme</a>.</p> <p>See the common issues pages for troubleshooting and correcting health issues:</p> <ul> <li><a href=../../Troubleshooting/common-issues/ >General troubleshooting</a></li> <li><a href=../../Troubleshooting/ceph-common-issues/ >Ceph troubleshooting</a></li> </ul> <h3 id=pods-all-running><strong>Pods all Running</strong><a class=headerlink href=#pods-all-running title="Permanent link">&para;</a></h3> <p>In a healthy Rook cluster, the operator, the agents and all Rook namespace pods should be in the <code>Running</code> state and have few, if any, pod restarts. To verify this, run the following commands:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=go>kubectl -n $ROOK_CLUSTER_NAMESPACE get pods</span>
</code></pre></div></td></tr></table></div> <h3 id=status-output><strong>Status Output</strong><a class=headerlink href=#status-output title="Permanent link">&para;</a></h3> <p>The Rook toolbox contains the Ceph tools that can give you status details of the cluster with the <code>ceph status</code> command. Let's look at an output sample and review some of the details:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1> 1</a></span>
<span class=normal><a href=#__codelineno-5-2> 2</a></span>
<span class=normal><a href=#__codelineno-5-3> 3</a></span>
<span class=normal><a href=#__codelineno-5-4> 4</a></span>
<span class=normal><a href=#__codelineno-5-5> 5</a></span>
<span class=normal><a href=#__codelineno-5-6> 6</a></span>
<span class=normal><a href=#__codelineno-5-7> 7</a></span>
<span class=normal><a href=#__codelineno-5-8> 8</a></span>
<span class=normal><a href=#__codelineno-5-9> 9</a></span>
<span class=normal><a href=#__codelineno-5-10>10</a></span>
<span class=normal><a href=#__codelineno-5-11>11</a></span>
<span class=normal><a href=#__codelineno-5-12>12</a></span>
<span class=normal><a href=#__codelineno-5-13>13</a></span>
<span class=normal><a href=#__codelineno-5-14>14</a></span>
<span class=normal><a href=#__codelineno-5-15>15</a></span>
<span class=normal><a href=#__codelineno-5-16>16</a></span>
<span class=normal><a href=#__codelineno-5-17>17</a></span>
<span class=normal><a href=#__codelineno-5-18>18</a></span>
<span class=normal><a href=#__codelineno-5-19>19</a></span>
<span class=normal><a href=#__codelineno-5-20>20</a></span>
<span class=normal><a href=#__codelineno-5-21>21</a></span>
<span class=normal><a href=#__codelineno-5-22>22</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class=gp>$ </span><span class=nv>TOOLS_POD</span><span class=o>=</span><span class=k>$(</span>kubectl -n <span class=nv>$ROOK_CLUSTER_NAMESPACE</span> get pod -l <span class=s2>&quot;app=rook-ceph-tools&quot;</span> -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].metadata.name}&#39;</span><span class=k>)</span>
<a id=__codelineno-5-2 name=__codelineno-5-2></a><span class=gp>$ </span>kubectl -n <span class=nv>$ROOK_CLUSTER_NAMESPACE</span> <span class=nb>exec</span> -it <span class=nv>$TOOLS_POD</span> -- ceph status
<a id=__codelineno-5-3 name=__codelineno-5-3></a><span class=go>  cluster:</span>
<a id=__codelineno-5-4 name=__codelineno-5-4></a><span class=go>    id:     a3f4d647-9538-4aff-9fd1-b845873c3fe9</span>
<a id=__codelineno-5-5 name=__codelineno-5-5></a><span class=go>    health: HEALTH_OK</span>
<a id=__codelineno-5-6 name=__codelineno-5-6></a>
<a id=__codelineno-5-7 name=__codelineno-5-7></a><span class=go>  services:</span>
<a id=__codelineno-5-8 name=__codelineno-5-8></a><span class=go>    mon: 3 daemons, quorum b,c,a</span>
<a id=__codelineno-5-9 name=__codelineno-5-9></a><span class=go>    mgr: a(active)</span>
<a id=__codelineno-5-10 name=__codelineno-5-10></a><span class=go>    mds: myfs-1/1/1 up  {0=myfs-a=up:active}, 1 up:standby-replay</span>
<a id=__codelineno-5-11 name=__codelineno-5-11></a><span class=go>    osd: 6 osds: 6 up, 6 in</span>
<a id=__codelineno-5-12 name=__codelineno-5-12></a><span class=go>    rgw: 1 daemon active</span>
<a id=__codelineno-5-13 name=__codelineno-5-13></a>
<a id=__codelineno-5-14 name=__codelineno-5-14></a><span class=go>  data:</span>
<a id=__codelineno-5-15 name=__codelineno-5-15></a><span class=go>    pools:   9 pools, 900 pgs</span>
<a id=__codelineno-5-16 name=__codelineno-5-16></a><span class=go>    objects: 67  objects, 11 KiB</span>
<a id=__codelineno-5-17 name=__codelineno-5-17></a><span class=go>    usage:   6.1 GiB used, 54 GiB / 60 GiB avail</span>
<a id=__codelineno-5-18 name=__codelineno-5-18></a><span class=go>    pgs:     900 active+clean</span>
<a id=__codelineno-5-19 name=__codelineno-5-19></a>
<a id=__codelineno-5-20 name=__codelineno-5-20></a><span class=go>  io:</span>
<a id=__codelineno-5-21 name=__codelineno-5-21></a><span class=go>    client:   7.4 KiB/s rd, 681 B/s wr, 11 op/s rd, 4 op/s wr</span>
<a id=__codelineno-5-22 name=__codelineno-5-22></a><span class=go>    recovery: 164 B/s, 1 objects/s</span>
</code></pre></div></td></tr></table></div> <p>In the output above, note the following indications that the cluster is in a healthy state:</p> <ul> <li>Cluster health: The overall cluster status is <code>HEALTH_OK</code> and there are no warning or error status messages displayed.</li> <li>Monitors (mon): All of the monitors are included in the <code>quorum</code> list.</li> <li>Manager (mgr): The Ceph manager is in the <code>active</code> state.</li> <li>OSDs (osd): All OSDs are <code>up</code> and <code>in</code>.</li> <li>Placement groups (pgs): All PGs are in the <code>active+clean</code> state.</li> <li>(If applicable) Ceph filesystem metadata server (mds): all MDSes are <code>active</code> for all filesystems</li> <li>(If applicable) Ceph object store RADOS gateways (rgw): all daemons are <code>active</code></li> </ul> <p>If your <code>ceph status</code> output has deviations from the general good health described above, there may be an issue that needs to be investigated further. There are other commands you may run for more details on the health of the system, such as <code>ceph osd status</code>. See the <a href=https://docs.ceph.com/docs/master/rados/troubleshooting/ >Ceph troubleshooting docs</a> for help.</p> <p>Rook will prevent the upgrade of the Ceph daemons if the health is in a <code>HEALTH_ERR</code> state. If you desired to proceed with the upgrade anyway, you will need to set either <code>skipUpgradeChecks: true</code> or <code>continueUpgradeAfterChecksEvenIfNotHealthy: true</code> as described in the <a href=../../CRDs/ceph-cluster-crd/#cluster-settings>cluster CR settings</a>.</p> <h3 id=container-versions><strong>Container Versions</strong><a class=headerlink href=#container-versions title="Permanent link">&para;</a></h3> <p>The container version running in a specific pod in the Rook cluster can be verified in its pod spec output. For example for the monitor pod <code>mon-b</code>, we can verify the container version it is running with the below commands:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1>1</a></span>
<span class=normal><a href=#__codelineno-6-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=go>POD_NAME=$(kubectl -n $ROOK_CLUSTER_NAMESPACE get pod -o custom-columns=name:.metadata.name --no-headers | grep rook-ceph-mon-b)</span>
<a id=__codelineno-6-2 name=__codelineno-6-2></a><span class=go>kubectl -n $ROOK_CLUSTER_NAMESPACE get pod ${POD_NAME} -o jsonpath=&#39;{.spec.containers[0].image}&#39;</span>
</code></pre></div></td></tr></table></div> <p>The status and container versions for all Rook pods can be collected all at once with the following commands:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span>
<span class=normal><a href=#__codelineno-7-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=go>kubectl -n $ROOK_OPERATOR_NAMESPACE get pod -o jsonpath=&#39;{range .items[*]}{.metadata.name}{&quot;\n\t&quot;}{.status.phase}{&quot;\t\t&quot;}{.spec.containers[0].image}{&quot;\t&quot;}{.spec.initContainers[0]}{&quot;\n&quot;}{end}&#39; &amp;&amp; \</span>
<a id=__codelineno-7-2 name=__codelineno-7-2></a><span class=go>kubectl -n $ROOK_CLUSTER_NAMESPACE get pod -o jsonpath=&#39;{range .items[*]}{.metadata.name}{&quot;\n\t&quot;}{.status.phase}{&quot;\t\t&quot;}{.spec.containers[0].image}{&quot;\t&quot;}{.spec.initContainers[0].image}{&quot;\n&quot;}{end}&#39;</span>
</code></pre></div></td></tr></table></div> <p>The <code>rook-version</code> label exists on Ceph controller resources. For various resource controllers, a summary of the resource controllers can be gained with the commands below. These will report the requested, updated, and currently available replicas for various Rook-Ceph resources in addition to the version of Rook for resources managed by the updated Rook-Ceph operator. Note that the operator and toolbox deployments do not have a <code>rook-version</code> label set.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1>1</a></span>
<span class=normal><a href=#__codelineno-8-2>2</a></span>
<span class=normal><a href=#__codelineno-8-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=go>kubectl -n $ROOK_CLUSTER_NAMESPACE get deployments -o jsonpath=&#39;{range .items[*]}{.metadata.name}{&quot;  \treq/upd/avl: &quot;}{.spec.replicas}{&quot;/&quot;}{.status.updatedReplicas}{&quot;/&quot;}{.status.readyReplicas}{&quot;  \trook-version=&quot;}{.metadata.labels.rook-version}{&quot;\n&quot;}{end}&#39;</span>
<a id=__codelineno-8-2 name=__codelineno-8-2></a>
<a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=go>kubectl -n $ROOK_CLUSTER_NAMESPACE get jobs -o jsonpath=&#39;{range .items[*]}{.metadata.name}{&quot;  \tsucceeded: &quot;}{.status.succeeded}{&quot;      \trook-version=&quot;}{.metadata.labels.rook-version}{&quot;\n&quot;}{end}&#39;</span>
</code></pre></div></td></tr></table></div> <h3 id=rook-volume-health><strong>Rook Volume Health</strong><a class=headerlink href=#rook-volume-health title="Permanent link">&para;</a></h3> <p>Any pod that is using a Rook volume should also remain healthy:</p> <ul> <li>The pod should be in the <code>Running</code> state with few, if any, restarts</li> <li>There should be no errors in its logs</li> <li>The pod should still be able to read and write to the attached Rook volume.</li> </ul> <h2 id=rook-operator-upgrade-process>Rook Operator Upgrade Process<a class=headerlink href=#rook-operator-upgrade-process title="Permanent link">&para;</a></h2> <p>In the examples given in this guide, we will be upgrading a live Rook cluster running <code>v1.8.8</code> to the version <code>v1.9.0</code>. This upgrade should work from any official patch release of Rook v1.8 to any official patch release of v1.9.</p> <p><strong>Rook releases from <code>master</code> are expressly unsupported.</strong> It is strongly recommended that you use <a href=https://github.com/rook/rook/releases>official releases</a> of Rook. Unreleased versions from the master branch are subject to changes and incompatibilities that will not be supported in the official releases. Builds from the master branch can have functionality changed or removed at any time without compatibility support and without prior notice.</p> <p>These methods should work for any number of Rook-Ceph clusters and Rook Operators as long as you parameterize the environment correctly. Merely repeat these steps for each Rook-Ceph cluster (<code>ROOK_CLUSTER_NAMESPACE</code>), and be sure to update the <code>ROOK_OPERATOR_NAMESPACE</code> parameter each time if applicable.</p> <p>Let's get started!</p> <h3 id=1-update-common-resources-and-crds><strong>1. Update common resources and CRDs</strong><a class=headerlink href=#1-update-common-resources-and-crds title="Permanent link">&para;</a></h3> <p>!! hint If you are upgrading via the Helm chart, the common resources and CRDs are automatically updated.</p> <p>First apply updates to Rook-Ceph common resources. This includes modified privileges (RBAC) needed by the Operator. Also update the Custom Resource Definitions (CRDs).</p> <p>Get the latest common resources manifests that contain the latest changes.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1>1</a></span>
<span class=normal><a href=#__codelineno-9-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class=go>git clone --single-branch --depth=1 --branch v1.9.0 https://github.com/rook/rook.git</span>
<a id=__codelineno-9-2 name=__codelineno-9-2></a><span class=go>cd rook/deploy/examples</span>
</code></pre></div></td></tr></table></div> <p>If you have deployed the Rook Operator or the Ceph cluster into a different namespace than <code>rook-ceph</code>, update the common resource manifests to use your <code>ROOK_OPERATOR_NAMESPACE</code> and <code>ROOK_CLUSTER_NAMESPACE</code> using <code>sed</code>.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span>
<span class=normal><a href=#__codelineno-10-3>3</a></span>
<span class=normal><a href=#__codelineno-10-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=go>sed -i.bak \</span>
<a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=go>    -e &quot;s/\(.*\):.*# namespace:operator/\1: $ROOK_OPERATOR_NAMESPACE # namespace:operator/g&quot; \</span>
<a id=__codelineno-10-3 name=__codelineno-10-3></a><span class=go>    -e &quot;s/\(.*\):.*# namespace:cluster/\1: $ROOK_CLUSTER_NAMESPACE # namespace:cluster/g&quot; \</span>
<a id=__codelineno-10-4 name=__codelineno-10-4></a><span class=go>  common.yaml</span>
</code></pre></div></td></tr></table></div> <p>Then apply the latest changes.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=go>kubectl apply -f common.yaml -f crds.yaml</span>
</code></pre></div></td></tr></table></div> <h4 id=updates-for-optional-resources><strong>Updates for optional resources</strong><a class=headerlink href=#updates-for-optional-resources title="Permanent link">&para;</a></h4> <h4 id=prometheus><strong>Prometheus</strong><a class=headerlink href=#prometheus title="Permanent link">&para;</a></h4> <p>If you have <a href=../../Storage-Configuration/ceph-monitoring/ >Prometheus monitoring</a> enabled, follow the step to upgrade the Prometheus RBAC resources as well.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1></a><span class=go>kubectl apply -f deploy/examples/monitoring/rbac.yaml</span>
</code></pre></div></td></tr></table></div> <p>Rook no longer deploys Prometheus rules from the operator.</p> <p>If you use the Helm chart <code>monitoring.enabled</code> value to deploy Prometheus rules, you may now additionally use <code>monitoring.createPrometheusRules</code> to instruct Helm to deploy the rules. You may alternately deploy the rules manually if you wish.</p> <p>To see the latest information about manually deploying rules, see the <a href=../../Storage-Configuration/ceph-monitoring/#prometheus-alets>Prometheus monitoring docs</a>.</p> <h4 id=mds-liveness-and-startup-probes><strong>MDS liveness and startup probes</strong><a class=headerlink href=#mds-liveness-and-startup-probes title="Permanent link">&para;</a></h4> <p>If you configure MDS probes in the CephCluster resource, copy them to the <a href=../../CRDs/ceph-filesystem-crd/#metadata-server-settings>CephFilesystem <code>metadataServer</code> settings</a> at this point. Do not remove them from the CephCluster until after the Rook upgrade is fully complete.</p> <h3 id=2-update-ceph-csi-versions><strong>2. Update Ceph CSI versions</strong><a class=headerlink href=#2-update-ceph-csi-versions title="Permanent link">&para;</a></h3> <p>!! hint If you are upgrading via the Helm chart and have not customized the CSI image versions, this is automatically updated.</p> <p>If you have specified custom CSI images in the Rook-Ceph Operator deployment, we recommended you update to use the latest Ceph-CSI drivers. See the <a href=#csi-version>CSI Version</a> section for more details.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If using snapshots, refer to the <a href=../../Storage-Configuration/Ceph-CSI/ceph-csi-snapshot/#upgrade-snapshot-api>Upgrade Snapshot API guide</a>.</p> </div> <h3 id=3-update-the-rook-operator><strong>3. Update the Rook Operator</strong><a class=headerlink href=#3-update-the-rook-operator title="Permanent link">&para;</a></h3> <p>!! hint If you are upgrading via the Helm chart, the operator is automatically updated.</p> <p>The largest portion of the upgrade is triggered when the operator's image is updated to <code>v1.9.x</code>. When the operator is updated, it will proceed to update all of the Ceph daemons.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-13-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1></a><span class=go>kubectl -n $ROOK_OPERATOR_NAMESPACE set image deploy/rook-ceph-operator rook-ceph-operator=rook/ceph:v1.9.0</span>
</code></pre></div></td></tr></table></div> <h3 id=4-wait-for-the-upgrade-to-complete><strong>4. Wait for the upgrade to complete</strong><a class=headerlink href=#4-wait-for-the-upgrade-to-complete title="Permanent link">&para;</a></h3> <p>Watch now in amazement as the Ceph mons, mgrs, OSDs, rbd-mirrors, MDSes and RGWs are terminated and replaced with updated versions in sequence. The cluster may be offline very briefly as mons update, and the Ceph Filesystem may fall offline a few times while the MDSes are upgrading. This is normal.</p> <p>The versions of the components can be viewed as they are updated:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-14-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1></a><span class=go>watch --exec kubectl -n $ROOK_CLUSTER_NAMESPACE get deployments -l rook_cluster=$ROOK_CLUSTER_NAMESPACE -o jsonpath=&#39;{range .items[*]}{.metadata.name}{&quot;  \treq/upd/avl: &quot;}{.spec.replicas}{&quot;/&quot;}{.status.updatedReplicas}{&quot;/&quot;}{.status.readyReplicas}{&quot;  \trook-version=&quot;}{.metadata.labels.rook-version}{&quot;\n&quot;}{end}&#39;</span>
</code></pre></div></td></tr></table></div> <p>As an example, this cluster is midway through updating the OSDs. When all deployments report <code>1/1/1</code> availability and <code>rook-version=v1.9.0</code>, the Ceph cluster's core components are fully updated.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-15-1>1</a></span>
<span class=normal><a href=#__codelineno-15-2>2</a></span>
<span class=normal><a href=#__codelineno-15-3>3</a></span>
<span class=normal><a href=#__codelineno-15-4>4</a></span>
<span class=normal><a href=#__codelineno-15-5>5</a></span>
<span class=normal><a href=#__codelineno-15-6>6</a></span>
<span class=normal><a href=#__codelineno-15-7>7</a></span>
<span class=normal><a href=#__codelineno-15-8>8</a></span>
<span class=normal><a href=#__codelineno-15-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1></a><span class=go>Every 2.0s: kubectl -n rook-ceph get deployment -o j...</span>
<a id=__codelineno-15-2 name=__codelineno-15-2></a>
<a id=__codelineno-15-3 name=__codelineno-15-3></a><span class=go>rook-ceph-mgr-a         req/upd/avl: 1/1/1      rook-version=v1.9.0</span>
<a id=__codelineno-15-4 name=__codelineno-15-4></a><span class=go>rook-ceph-mon-a         req/upd/avl: 1/1/1      rook-version=v1.9.0</span>
<a id=__codelineno-15-5 name=__codelineno-15-5></a><span class=go>rook-ceph-mon-b         req/upd/avl: 1/1/1      rook-version=v1.9.0</span>
<a id=__codelineno-15-6 name=__codelineno-15-6></a><span class=go>rook-ceph-mon-c         req/upd/avl: 1/1/1      rook-version=v1.9.0</span>
<a id=__codelineno-15-7 name=__codelineno-15-7></a><span class=go>rook-ceph-osd-0         req/upd/avl: 1//        rook-version=v1.9.0</span>
<a id=__codelineno-15-8 name=__codelineno-15-8></a><span class=go>rook-ceph-osd-1         req/upd/avl: 1/1/1      rook-version=v1.8.8</span>
<a id=__codelineno-15-9 name=__codelineno-15-9></a><span class=go>rook-ceph-osd-2         req/upd/avl: 1/1/1      rook-version=v1.8.8</span>
</code></pre></div></td></tr></table></div> <p>An easy check to see if the upgrade is totally finished is to check that there is only one <code>rook-version</code> reported across the cluster.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-16-1>1</a></span>
<span class=normal><a href=#__codelineno-16-2>2</a></span>
<span class=normal><a href=#__codelineno-16-3>3</a></span>
<span class=normal><a href=#__codelineno-16-4>4</a></span>
<span class=normal><a href=#__codelineno-16-5>5</a></span>
<span class=normal><a href=#__codelineno-16-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1></a><span class=gp># </span>kubectl -n <span class=nv>$ROOK_CLUSTER_NAMESPACE</span> get deployment -l <span class=nv>rook_cluster</span><span class=o>=</span><span class=nv>$ROOK_CLUSTER_NAMESPACE</span> -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{range .items[*]}{&quot;rook-version=&quot;}{.metadata.labels.rook-version}{&quot;\n&quot;}{end}&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq
<a id=__codelineno-16-2 name=__codelineno-16-2></a><span class=go>This cluster is not yet finished:</span>
<a id=__codelineno-16-3 name=__codelineno-16-3></a><span class=go>  rook-version=v1.8.8</span>
<a id=__codelineno-16-4 name=__codelineno-16-4></a><span class=go>  rook-version=v1.9.0</span>
<a id=__codelineno-16-5 name=__codelineno-16-5></a><span class=go>This cluster is finished:</span>
<a id=__codelineno-16-6 name=__codelineno-16-6></a><span class=go>  rook-version=v1.9.0</span>
</code></pre></div></td></tr></table></div> <h3 id=5-verify-the-updated-cluster><strong>5. Verify the updated cluster</strong><a class=headerlink href=#5-verify-the-updated-cluster title="Permanent link">&para;</a></h3> <p>At this point, your Rook operator should be running version <code>rook/ceph:v1.9.0</code>.</p> <p>Verify the Ceph cluster's health using the <a href=#health-verification>health verification section</a>.</p> <h2 id=ceph-version-upgrades>Ceph Version Upgrades<a class=headerlink href=#ceph-version-upgrades title="Permanent link">&para;</a></h2> <p>Rook v1.9 supports the following Ceph versions:</p> <ul> <li>Ceph Quincy v17.2.0 or newer</li> <li>Ceph Pacific v16.2.0 or newer</li> <li>Ceph Octopus v15.2.0 or newer</li> </ul> <p>These are the only supported versions of Ceph. Rook v1.10 is planning to drop support for Ceph Octopus (15.2.x), so please consider upgrading your Ceph cluster.</p> <div class="admonition important"> <p class=admonition-title>Important</p> <p>When an update is requested, the operator will check Ceph's status, <strong>if it is in <code>HEALTH_ERR</code> the operator will refuse to do the upgrade.</strong></p> </div> <p>Rook is cautious when performing upgrades. When an upgrade is requested (the Ceph image has been updated in the CR), Rook will go through all the daemons one by one and will individually perform checks on them. It will make sure a particular daemon can be stopped before performing the upgrade. Once the deployment has been updated, it checks if this is ok to continue. After each daemon is updated we wait for things to settle (monitors to be in a quorum, PGs to be clean for OSDs, up for MDSes, etc.), then only when the condition is met we move to the next daemon. We repeat this process until all the daemons have been updated.</p> <p>We recommend updating to v16.2.7 or newer. If you require updating <strong>to v16.2.0-v16.2.6</strong>, please see the <a href=https://rook.github.io/docs/rook/v1.8/ceph-upgrade.html#disable-bluestore_fsck_quick_fix_on_mount>v1.8 upgrade guide for a special upgrade consideration</a>.</p> <h3 id=rename-cephblockpool-device_health_metrics-pool-when-upgrading-to-quincy-v17><strong>Rename CephBlockPool device_health_metrics pool when upgrading to Quincy v17</strong><a class=headerlink href=#rename-cephblockpool-device_health_metrics-pool-when-upgrading-to-quincy-v17 title="Permanent link">&para;</a></h3> <p>In Ceph Quincy (v17), the <code>device_health_metrics</code> pool was renamed to <code>.mgr</code>. Ceph will perform this migration automatically. If you do not use CephBlockPool to customize the configuration of the <code>device_health_metrics</code> pool, you don't need to do anything further here.</p> <p>If you do use CephBlockPool to customize the configuration of the <code>device_health_metrics</code> pool, you will need two extra steps after the Ceph upgrade is complete. Once upgrade is complete:</p> <ol> <li>Create a new CephBlockPool to configure the <code>.mgr</code> built-in pool. You can reference the example <a href=https://github.com/rook/rook/blob/master/deploy/examples/pool-builtin-mgr.yaml>builtin mgr pool</a>.</li> <li>Delete the old CephBlockPool that represents the <code>device_health_metrics</code> pool.</li> </ol> <h3 id=important-consideration-for-cephnfs-users><strong>Important consideration for CephNFS users</strong><a class=headerlink href=#important-consideration-for-cephnfs-users title="Permanent link">&para;</a></h3> <p>Ceph Quincy v17.2.0 has a potentially breaking regression with CephNFS. See the NFS documentation's <a href=../../CRDs/ceph-nfs-crd/#ceph-v1720>known issue</a> for more detail.</p> <h3 id=ceph-images><strong>Ceph images</strong><a class=headerlink href=#ceph-images title="Permanent link">&para;</a></h3> <p>Official Ceph container images can be found on <a href="https://quay.io/repository/ceph/ceph?tab=tags">Quay</a>. Prior to August 2021, official images were on docker.io. While those images will remain on Docker Hub, all new images are being pushed to Quay.</p> <p>These images are tagged in a few ways:</p> <ul> <li>The most explicit form of tags are full-ceph-version-and-build tags (e.g., <code>v16.2.7-20220216</code>). These tags are recommended for production clusters, as there is no possibility for the cluster to be heterogeneous with respect to the version of Ceph running in containers.</li> <li>Ceph major version tags (e.g., <code>v16</code>) are useful for development and test clusters so that the latest version of Ceph is always available.</li> </ul> <p><strong>Ceph containers other than the official images from the registry above will not be supported.</strong></p> <h3 id=example-upgrade-to-ceph-pacific><strong>Example upgrade to Ceph Pacific</strong><a class=headerlink href=#example-upgrade-to-ceph-pacific title="Permanent link">&para;</a></h3> <h4 id=1-update-the-main-ceph-daemons><strong>1. Update the main Ceph daemons</strong><a class=headerlink href=#1-update-the-main-ceph-daemons title="Permanent link">&para;</a></h4> <p>The majority of the upgrade will be handled by the Rook operator. Begin the upgrade by changing the Ceph image field in the cluster CRD (<code>spec.cephVersion.image</code>).</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-17-1>1</a></span>
<span class=normal><a href=#__codelineno-17-2>2</a></span>
<span class=normal><a href=#__codelineno-17-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1></a><span class=go>NEW_CEPH_IMAGE=&#39;quay.io/ceph/ceph:v16.2.7-20220216&#39;</span>
<a id=__codelineno-17-2 name=__codelineno-17-2></a><span class=go>CLUSTER_NAME=&quot;$ROOK_CLUSTER_NAMESPACE&quot;  # change if your cluster name is not the Rook namespace</span>
<a id=__codelineno-17-3 name=__codelineno-17-3></a><span class=go>kubectl -n $ROOK_CLUSTER_NAMESPACE patch CephCluster $CLUSTER_NAME --type=merge -p &quot;{\&quot;spec\&quot;: {\&quot;cephVersion\&quot;: {\&quot;image\&quot;: \&quot;$NEW_CEPH_IMAGE\&quot;}}}&quot;</span>
</code></pre></div></td></tr></table></div> <h4 id=2-wait-for-the-daemon-pod-updates-to-complete><strong>2. Wait for the daemon pod updates to complete</strong><a class=headerlink href=#2-wait-for-the-daemon-pod-updates-to-complete title="Permanent link">&para;</a></h4> <p>As with upgrading Rook, you must now wait for the upgrade to complete. Status can be determined in a similar way to the Rook upgrade as well.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-18-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1></a><span class=go>watch --exec kubectl -n $ROOK_CLUSTER_NAMESPACE get deployments -l rook_cluster=$ROOK_CLUSTER_NAMESPACE -o jsonpath=&#39;{range .items[*]}{.metadata.name}{&quot;  \treq/upd/avl: &quot;}{.spec.replicas}{&quot;/&quot;}{.status.updatedReplicas}{&quot;/&quot;}{.status.readyReplicas}{&quot;  \tceph-version=&quot;}{.metadata.labels.ceph-version}{&quot;\n&quot;}{end}&#39;</span>
</code></pre></div></td></tr></table></div> <p>Determining when the Ceph has fully updated is rather simple.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-19-1>1</a></span>
<span class=normal><a href=#__codelineno-19-2>2</a></span>
<span class=normal><a href=#__codelineno-19-3>3</a></span>
<span class=normal><a href=#__codelineno-19-4>4</a></span>
<span class=normal><a href=#__codelineno-19-5>5</a></span>
<span class=normal><a href=#__codelineno-19-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1></a><span class=go>kubectl -n $ROOK_CLUSTER_NAMESPACE get deployment -l rook_cluster=$ROOK_CLUSTER_NAMESPACE -o jsonpath=&#39;{range .items[*]}{&quot;ceph-version=&quot;}{.metadata.labels.ceph-version}{&quot;\n&quot;}{end}&#39; | sort | uniq</span>
<a id=__codelineno-19-2 name=__codelineno-19-2></a><span class=go>This cluster is not yet finished:</span>
<a id=__codelineno-19-3 name=__codelineno-19-3></a><span class=go>    ceph-version=15.2.13-0</span>
<a id=__codelineno-19-4 name=__codelineno-19-4></a><span class=go>    ceph-version=16.2.6-0</span>
<a id=__codelineno-19-5 name=__codelineno-19-5></a><span class=go>This cluster is finished:</span>
<a id=__codelineno-19-6 name=__codelineno-19-6></a><span class=go>    ceph-version=16.2.6-0</span>
</code></pre></div></td></tr></table></div> <h4 id=3-verify-the-updated-cluster><strong>3. Verify the updated cluster</strong><a class=headerlink href=#3-verify-the-updated-cluster title="Permanent link">&para;</a></h4> <p>Verify the Ceph cluster's health using the <a href=#health-verification>health verification section</a>.</p> <h2 id=csi-version>CSI Version<a class=headerlink href=#csi-version title="Permanent link">&para;</a></h2> <p>If you have a cluster running with CSI drivers enabled and you want to configure Rook to use non-default CSI images, the following settings will need to be applied for the desired version of CSI.</p> <p>The operator configuration variables are found in the <code>rook-ceph-operator-config</code> ConfigMap. These settings can also be specified as environment variables on the operator deployment, but the env vars will be overridden if configmap values are specified.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-20-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1></a><span class=go>kubectl -n $ROOK_OPERATOR_NAMESPACE edit configmap rook-ceph-operator-config</span>
</code></pre></div></td></tr></table></div> <p>The default upstream images are included below, which you can change to your desired images.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-21-1>1</a></span>
<span class=normal><a href=#__codelineno-21-2>2</a></span>
<span class=normal><a href=#__codelineno-21-3>3</a></span>
<span class=normal><a href=#__codelineno-21-4>4</a></span>
<span class=normal><a href=#__codelineno-21-5>5</a></span>
<span class=normal><a href=#__codelineno-21-6>6</a></span>
<span class=normal><a href=#__codelineno-21-7>7</a></span>
<span class=normal><a href=#__codelineno-21-8>8</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1></a><span class=nt>ROOK_CSI_CEPH_IMAGE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;quay.io/cephcsi/cephcsi:v3.6.1&quot;</span><span class=w></span>
<a id=__codelineno-21-2 name=__codelineno-21-2></a><span class=nt>ROOK_CSI_REGISTRAR_IMAGE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.5.0&quot;</span><span class=w></span>
<a id=__codelineno-21-3 name=__codelineno-21-3></a><span class=nt>ROOK_CSI_PROVISIONER_IMAGE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;k8s.gcr.io/sig-storage/csi-provisioner:v3.1.0&quot;</span><span class=w></span>
<a id=__codelineno-21-4 name=__codelineno-21-4></a><span class=nt>ROOK_CSI_ATTACHER_IMAGE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;k8s.gcr.io/sig-storage/csi-attacher:v3.4.0&quot;</span><span class=w></span>
<a id=__codelineno-21-5 name=__codelineno-21-5></a><span class=nt>ROOK_CSI_RESIZER_IMAGE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;k8s.gcr.io/sig-storage/csi-resizer:v1.4.0&quot;</span><span class=w></span>
<a id=__codelineno-21-6 name=__codelineno-21-6></a><span class=nt>ROOK_CSI_SNAPSHOTTER_IMAGE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;k8s.gcr.io/sig-storage/csi-snapshotter:v5.0.1&quot;</span><span class=w></span>
<a id=__codelineno-21-7 name=__codelineno-21-7></a><span class=nt>CSI_VOLUME_REPLICATION_IMAGE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;quay.io/csiaddons/volumereplication-operator:v0.3.0&quot;</span><span class=w></span>
<a id=__codelineno-21-8 name=__codelineno-21-8></a><span class=nt>ROOK_CSIADDONS_IMAGE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;quay.io/csiaddons/k8s-sidecar:v0.2.1&quot;</span><span class=w></span>
</code></pre></div></td></tr></table></div> <h3 id=use-default-images><strong>Use default images</strong><a class=headerlink href=#use-default-images title="Permanent link">&para;</a></h3> <p>If you would like Rook to use the inbuilt default upstream images, then you may simply remove all variables matching <code>ROOK_CSI_*_IMAGE</code> from the above ConfigMap and/or the operator deployment.</p> <h3 id=verifying-updates><strong>Verifying updates</strong><a class=headerlink href=#verifying-updates title="Permanent link">&para;</a></h3> <p>You can use the below command to see the CSI images currently being used in the cluster. Note that not all images (like <code>volumereplication-operator</code>) may be present in every cluster depending on which CSI features are enabled.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-22-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1></a><span class=go>kubectl --namespace rook-ceph get pod -o jsonpath=&#39;{range .items[*]}{range .spec.containers[*]}{.image}{&quot;\n&quot;}&#39; -l &#39;app in (csi-rbdplugin,csi-rbdplugin-provisioner,csi-cephfsplugin,csi-cephfsplugin-provisioner)&#39; | sort | uniq</span>
</code></pre></div></td></tr></table></div> <p>The default images can also be found with each release in the <a href=https://github.com/rook/rook/blob/master/deploy/examples/images.txt>images list</a></p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../Troubleshooting/direct-tools/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Direct Tools" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Direct Tools </div> </div> </a> <a href=../../Contributing/development-flow/ class="md-footer__link md-footer__link--next" aria-label="Next: Development Flow" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Development Flow </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=/ class=logo> <img src=/images/rook-logo-small.svg alt=rook.io> </a> <p> &#169; Rook Authors 2022. Documentation distributed under <a href=https://creativecommons.org/licenses/by/4.0>CC-BY-4.0</a>. </p> <p> &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage/ >Trademark Usage</a> page. </p> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://slack.rook.io/ target=_blank rel=noopener title=slack.rook.io class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> <a href=https://twitter.com/rook_io target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://groups.google.com/forum/#!forum/rook-dev target=_blank rel=noopener title=groups.google.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M191.9 448.6a47.726 47.726 0 0 1-27.78-8.891L32 340.2V480c0 17.62 14.38 32 32 32h256c17.62 0 32-14.38 32-32V340.2l-131.8 99.3a48.4 48.4 0 0 1-28.3 9.1zM192 192c0-35.25 28.75-64 64-64h224V32c0-17.62-14.38-32-32-32H128c-17.6 0-32 14.38-32 32v192h96v-32zm128 64H64c-17.62 0-32 14.4-32 32v12.18l151 113.8c5.25 3.719 12.7 3.734 18.27-.25L352 300.2V288c0-17.6-14.4-32-32-32zm256-96H256c-17.6 0-32 14.4-32 32v32h96c33.25 0 60.63 25.38 63.75 57.88L384 416h192c17.62 0 32-14.38 32-32V192c0-17.6-14.4-32-32-32zm-32 128h-64v-64h64v64z"/></svg> </a> <a href=https://blog.rook.io/ target=_blank rel=noopener title=blog.rook.io class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262Zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.tabs.link", "instant", "navigation.expand", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "tabs"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest-release", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.c2e1ee47.min.js></script> </body> </html>