<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Rook Ceph Documentation"><meta name=author content="Rook Authors"><link href=https://rook.io/v1.11/Storage-Configuration/Shared-Filesystem-CephFS/filesystem-storage/ rel=canonical><link href=../../Block-Storage-RBD/rbd-async-disaster-recovery-failover-failback/ rel=prev><link href=../filesystem-mirroring/ rel=next><link rel=icon href=https://rook.io/images/favicon_192x192.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.6"><title>Filesystem Storage Overview - Rook Ceph Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.35e1ed30.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.356b1318.min.css><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=rook-blue data-md-color-accent=deep-orange> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#prerequisites class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> This documentation is not for the latest stable version of Rook. <a href=../../../../latest-release/ > <strong>Click here for the latest release documentation.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Rook Ceph Documentation" class="md-header__button md-logo" aria-label="Rook Ceph Documentation" data-md-component=logo> <img src=https://rook.io/images/rook-logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Rook Ceph Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Filesystem Storage Overview </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=rook-blue data-md-color-accent=deep-orange aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=rook-blue data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/rook/rook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../Getting-Started/intro/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../Helm-Charts/helm-charts/ class=md-tabs__link> Helm Charts </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../Block-Storage-RBD/block-storage/ class=md-tabs__link> Storage Configuration </a> </li> <li class=md-tabs__item> <a href=../../../CRDs/Cluster/ceph-cluster-crd/ class=md-tabs__link> Custom Resources </a> </li> <li class=md-tabs__item> <a href=../../../Troubleshooting/krew-plugin/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=../../../Upgrade/health-verification/ class=md-tabs__link> Upgrade </a> </li> <li class=md-tabs__item> <a href=../../../Contributing/development-flow/ class=md-tabs__link> Contributing </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Rook Ceph Documentation" class="md-nav__button md-logo" aria-label="Rook Ceph Documentation" data-md-component=logo> <img src=https://rook.io/images/rook-logo.svg alt=logo> </a> Rook Ceph Documentation </label> <div class=md-nav__source> <a href=https://github.com/rook/rook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Getting-Started/intro/ class=md-nav__link> <span class=md-ellipsis> Rook </span> </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/glossary/ class=md-nav__link> <span class=md-ellipsis> Glossary </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_1_3> <label class=md-nav__link for=__nav_1_3 id=__nav_1_3_label tabindex=0> <span class=md-ellipsis> Prerequisites </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Getting-Started/Prerequisites/prerequisites/ class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/Prerequisites/authenticated-registry/ class=md-nav__link> <span class=md-ellipsis> Authenticated Container Registries </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Getting-Started/quickstart/ class=md-nav__link> <span class=md-ellipsis> Quickstart </span> </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/storage-architecture/ class=md-nav__link> <span class=md-ellipsis> Storage Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/example-configurations/ class=md-nav__link> <span class=md-ellipsis> Example Configurations </span> </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/ceph-openshift/ class=md-nav__link> <span class=md-ellipsis> OpenShift </span> </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/ceph-teardown/ class=md-nav__link> <span class=md-ellipsis> Cleanup </span> </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/release-cycle/ class=md-nav__link> <span class=md-ellipsis> Release Cycle </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Helm Charts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Helm Charts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Helm-Charts/helm-charts/ class=md-nav__link> <span class=md-ellipsis> Helm Charts Overview </span> </a> </li> <li class=md-nav__item> <a href=../../../Helm-Charts/operator-chart/ class=md-nav__link> <span class=md-ellipsis> Ceph Operator Helm Chart </span> </a> </li> <li class=md-nav__item> <a href=../../../Helm-Charts/ceph-cluster-chart/ class=md-nav__link> <span class=md-ellipsis> Ceph Cluster Helm Chart </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Storage Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Storage Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Block Storage (RBD) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Block Storage (RBD) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Block-Storage-RBD/block-storage/ class=md-nav__link> <span class=md-ellipsis> Block Storage Overview </span> </a> </li> <li class=md-nav__item> <a href=../../Block-Storage-RBD/rbd-mirroring/ class=md-nav__link> <span class=md-ellipsis> RBD Mirroring </span> </a> </li> <li class=md-nav__item> <a href=../../Block-Storage-RBD/rbd-async-disaster-recovery-failover-failback/ class=md-nav__link> <span class=md-ellipsis> RBD Asynchronous DR Failover and Failback </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2 checked> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Shared Filesystem (CephFS) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=true> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Shared Filesystem (CephFS) </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Filesystem Storage Overview </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Filesystem Storage Overview </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> <nav class=md-nav aria-label=Prerequisites> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multiple-filesystems-support class=md-nav__link> Multiple Filesystems Support </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-the-filesystem class=md-nav__link> Create the Filesystem </a> </li> <li class=md-nav__item> <a href=#provision-storage class=md-nav__link> Provision Storage </a> </li> <li class=md-nav__item> <a href=#quotas class=md-nav__link> Quotas </a> </li> <li class=md-nav__item> <a href=#consume-the-shared-filesystem-k8s-registry-sample class=md-nav__link> Consume the Shared Filesystem: K8s Registry Sample </a> <nav class=md-nav aria-label="Consume the Shared Filesystem: K8s Registry Sample"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#kernel-version-requirement class=md-nav__link> Kernel Version Requirement </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#consume-the-shared-filesystem-toolbox class=md-nav__link> Consume the Shared Filesystem: Toolbox </a> </li> <li class=md-nav__item> <a href=#consume-the-shared-filesystem-across-namespaces class=md-nav__link> Consume the Shared Filesystem across namespaces </a> <nav class=md-nav aria-label="Consume the Shared Filesystem across namespaces"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#shared-volume-creation class=md-nav__link> Shared volume creation </a> </li> <li class=md-nav__item> <a href=#shared-volume-removal class=md-nav__link> Shared volume removal </a> </li> <li class=md-nav__item> <a href=#pending-issue class=md-nav__link> Pending Issue </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#teardown class=md-nav__link> Teardown </a> <nav class=md-nav aria-label=Teardown> <ul class=md-nav__list> <li class=md-nav__item> <a href=#advanced-example-erasure-coded-filesystem class=md-nav__link> Advanced Example: Erasure Coded Filesystem </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../filesystem-mirroring/ class=md-nav__link> <span class=md-ellipsis> Filesystem Mirroring </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Object Storage (RGW) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Object Storage (RGW) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Object-Storage-RGW/object-storage/ class=md-nav__link> <span class=md-ellipsis> Object Storage Overview </span> </a> </li> <li class=md-nav__item> <a href=../../Object-Storage-RGW/ceph-object-bucket-claim/ class=md-nav__link> <span class=md-ellipsis> Bucket Claim </span> </a> </li> <li class=md-nav__item> <a href=../../Object-Storage-RGW/ceph-object-bucket-notifications/ class=md-nav__link> <span class=md-ellipsis> Object Bucket Notifications </span> </a> </li> <li class=md-nav__item> <a href=../../Object-Storage-RGW/ceph-object-multisite/ class=md-nav__link> <span class=md-ellipsis> Object Store Multisite </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> NFS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> NFS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../NFS/nfs/ class=md-nav__link> <span class=md-ellipsis> NFS Storage Overview </span> </a> </li> <li class=md-nav__item> <a href=../../NFS/nfs-csi-driver/ class=md-nav__link> <span class=md-ellipsis> CSI provisioner and driver </span> </a> </li> <li class=md-nav__item> <a href=../../NFS/nfs-security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../../NFS/nfs-advanced/ class=md-nav__link> <span class=md-ellipsis> Advanced configuration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Monitoring </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Monitoring/ceph-dashboard/ class=md-nav__link> <span class=md-ellipsis> Ceph Dashboard </span> </a> </li> <li class=md-nav__item> <a href=../../Monitoring/ceph-monitoring/ class=md-nav__link> <span class=md-ellipsis> Prometheus Monitoring </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> Ceph CSI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Ceph CSI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Ceph-CSI/ceph-csi-drivers/ class=md-nav__link> <span class=md-ellipsis> Ceph CSI Drivers </span> </a> </li> <li class=md-nav__item> <a href=../../Ceph-CSI/ceph-csi-snapshot/ class=md-nav__link> <span class=md-ellipsis> Snapshots </span> </a> </li> <li class=md-nav__item> <a href=../../Ceph-CSI/ceph-csi-volume-clone/ class=md-nav__link> <span class=md-ellipsis> Volume clone </span> </a> </li> <li class=md-nav__item> <a href=../../Ceph-CSI/custom-images/ class=md-nav__link> <span class=md-ellipsis> Custom Images </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../ceph-teardown/ class=md-nav__link> <span class=md-ellipsis> Cleanup </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Advanced/ceph-configuration/ class=md-nav__link> <span class=md-ellipsis> Ceph Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../Advanced/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../Advanced/key-management-system/ class=md-nav__link> <span class=md-ellipsis> Key Management System </span> </a> </li> <li class=md-nav__item> <a href=../../Advanced/ceph-osd-mgmt/ class=md-nav__link> <span class=md-ellipsis> Ceph OSD Management </span> </a> </li> <li class=md-nav__item> <a href=../../Advanced/ceph-mon-health/ class=md-nav__link> <span class=md-ellipsis> Monitor Health </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Custom Resources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Custom Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> Cluster Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Cluster Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../CRDs/Cluster/ceph-cluster-crd/ class=md-nav__link> <span class=md-ellipsis> CephCluster CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Cluster/host-cluster/ class=md-nav__link> <span class=md-ellipsis> Host Storage Cluster </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Cluster/pvc-cluster/ class=md-nav__link> <span class=md-ellipsis> PVC Storage Cluster </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Cluster/stretch-cluster/ class=md-nav__link> <span class=md-ellipsis> Stretch Storage Cluster </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Cluster/external-cluster/ class=md-nav__link> <span class=md-ellipsis> External Storage Cluster </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Block Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Block Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../CRDs/Block-Storage/ceph-block-pool-crd/ class=md-nav__link> <span class=md-ellipsis> CephBlockPool CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Block-Storage/ceph-block-pool-rados-namespace-crd/ class=md-nav__link> <span class=md-ellipsis> CephBlockPoolRados Namespace CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Block-Storage/ceph-rbd-mirror-crd/ class=md-nav__link> <span class=md-ellipsis> CephRBDMirror CRD </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> Shared Filesystem </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Shared Filesystem </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../CRDs/Shared-Filesystem/ceph-filesystem-crd/ class=md-nav__link> <span class=md-ellipsis> CephFilesystem CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Shared-Filesystem/ceph-fs-mirror-crd/ class=md-nav__link> <span class=md-ellipsis> CephFilesystemMirror CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Shared-Filesystem/ceph-fs-subvolumegroup-crd/ class=md-nav__link> <span class=md-ellipsis> FilesystemSubVolumeGroup CRD </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> Object Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Object Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-store-crd/ class=md-nav__link> <span class=md-ellipsis> CephObjectStore CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-store-user-crd/ class=md-nav__link> <span class=md-ellipsis> CephObjectStoreUser CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-realm-crd/ class=md-nav__link> <span class=md-ellipsis> CephObjectRealm CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-zonegroup-crd/ class=md-nav__link> <span class=md-ellipsis> CephObjectZoneGroup CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-zone-crd/ class=md-nav__link> <span class=md-ellipsis> CephObjectZone CRD </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../CRDs/ceph-client-crd/ class=md-nav__link> <span class=md-ellipsis> CephClient CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/ceph-nfs-crd/ class=md-nav__link> <span class=md-ellipsis> CephNFS CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../CRDs/specification/ class=md-nav__link> <span class=md-ellipsis> Specification </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Troubleshooting/krew-plugin/ class=md-nav__link> <span class=md-ellipsis> Krew Plugin </span> </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/ceph-toolbox/ class=md-nav__link> <span class=md-ellipsis> Toolbox </span> </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/common-issues/ class=md-nav__link> <span class=md-ellipsis> Common Issues </span> </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/ceph-common-issues/ class=md-nav__link> <span class=md-ellipsis> Ceph Common Issues </span> </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/ceph-csi-common-issues/ class=md-nav__link> <span class=md-ellipsis> CSI Common Issues </span> </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/openshift-common-issues/ class=md-nav__link> <span class=md-ellipsis> OpenShift Common Issues </span> </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/disaster-recovery/ class=md-nav__link> <span class=md-ellipsis> Disaster Recovery </span> </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/direct-tools/ class=md-nav__link> <span class=md-ellipsis> Direct Tools </span> </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/performance-profiling/ class=md-nav__link> <span class=md-ellipsis> Performance Profiling </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Upgrade </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Upgrade/health-verification/ class=md-nav__link> <span class=md-ellipsis> Health Verification </span> </a> </li> <li class=md-nav__item> <a href=../../../Upgrade/rook-upgrade/ class=md-nav__link> <span class=md-ellipsis> Rook Upgrades </span> </a> </li> <li class=md-nav__item> <a href=../../../Upgrade/ceph-upgrade/ class=md-nav__link> <span class=md-ellipsis> Ceph Upgrades </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Contributing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Contributing/development-flow/ class=md-nav__link> <span class=md-ellipsis> Development Flow </span> </a> </li> <li class=md-nav__item> <a href=../../../Contributing/development-environment/ class=md-nav__link> <span class=md-ellipsis> Developer Environment </span> </a> </li> <li class=md-nav__item> <a href=../../../Contributing/documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=../../../Contributing/ci-configuration/ class=md-nav__link> <span class=md-ellipsis> CI Configuration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> <nav class=md-nav aria-label=Prerequisites> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multiple-filesystems-support class=md-nav__link> Multiple Filesystems Support </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-the-filesystem class=md-nav__link> Create the Filesystem </a> </li> <li class=md-nav__item> <a href=#provision-storage class=md-nav__link> Provision Storage </a> </li> <li class=md-nav__item> <a href=#quotas class=md-nav__link> Quotas </a> </li> <li class=md-nav__item> <a href=#consume-the-shared-filesystem-k8s-registry-sample class=md-nav__link> Consume the Shared Filesystem: K8s Registry Sample </a> <nav class=md-nav aria-label="Consume the Shared Filesystem: K8s Registry Sample"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#kernel-version-requirement class=md-nav__link> Kernel Version Requirement </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#consume-the-shared-filesystem-toolbox class=md-nav__link> Consume the Shared Filesystem: Toolbox </a> </li> <li class=md-nav__item> <a href=#consume-the-shared-filesystem-across-namespaces class=md-nav__link> Consume the Shared Filesystem across namespaces </a> <nav class=md-nav aria-label="Consume the Shared Filesystem across namespaces"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#shared-volume-creation class=md-nav__link> Shared volume creation </a> </li> <li class=md-nav__item> <a href=#shared-volume-removal class=md-nav__link> Shared volume removal </a> </li> <li class=md-nav__item> <a href=#pending-issue class=md-nav__link> Pending Issue </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#teardown class=md-nav__link> Teardown </a> <nav class=md-nav aria-label=Teardown> <ul class=md-nav__list> <li class=md-nav__item> <a href=#advanced-example-erasure-coded-filesystem class=md-nav__link> Advanced Example: Erasure Coded Filesystem </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Filesystem Storage Overview</h1> <p>A filesystem storage (also named shared filesystem) can be mounted with read/write permission from multiple pods. This may be useful for applications which can be clustered using a shared filesystem.</p> <p>This example runs a shared filesystem for the <a href=https://github.com/kubernetes/kubernetes/tree/release-1.9/cluster/addons/registry>kube-registry</a>.</p> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <p>This guide assumes you have created a Rook cluster as explained in the main <a href=../../../Getting-Started/quickstart/ >quickstart guide</a></p> <h3 id=multiple-filesystems-support>Multiple Filesystems Support<a class=headerlink href=#multiple-filesystems-support title="Permanent link">&para;</a></h3> <p>Multiple filesystems are supported as of the Ceph Pacific release.</p> <h2 id=create-the-filesystem>Create the Filesystem<a class=headerlink href=#create-the-filesystem title="Permanent link">&para;</a></h2> <p>Create the filesystem by specifying the desired settings for the metadata pool, data pools, and metadata server in the <code>CephFilesystem</code> CRD. In this example we create the metadata pool with replication of three and a single data pool with replication of three. For more options, see the documentation on <a href=../../../CRDs/Shared-Filesystem/ceph-filesystem-crd/ >creating shared filesystems</a>.</p> <p>Save this shared filesystem definition as <code>filesystem.yaml</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1> 1</a></span>
<span class=normal><a href=#__codelineno-0-2> 2</a></span>
<span class=normal><a href=#__codelineno-0-3> 3</a></span>
<span class=normal><a href=#__codelineno-0-4> 4</a></span>
<span class=normal><a href=#__codelineno-0-5> 5</a></span>
<span class=normal><a href=#__codelineno-0-6> 6</a></span>
<span class=normal><a href=#__codelineno-0-7> 7</a></span>
<span class=normal><a href=#__codelineno-0-8> 8</a></span>
<span class=normal><a href=#__codelineno-0-9> 9</a></span>
<span class=normal><a href=#__codelineno-0-10>10</a></span>
<span class=normal><a href=#__codelineno-0-11>11</a></span>
<span class=normal><a href=#__codelineno-0-12>12</a></span>
<span class=normal><a href=#__codelineno-0-13>13</a></span>
<span class=normal><a href=#__codelineno-0-14>14</a></span>
<span class=normal><a href=#__codelineno-0-15>15</a></span>
<span class=normal><a href=#__codelineno-0-16>16</a></span>
<span class=normal><a href=#__codelineno-0-17>17</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ceph.rook.io/v1</span>
<a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CephFilesystem</span>
<a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">myfs</span>
<a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-ceph</span>
<a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=w>  </span><span class=nt>metadataPool</span><span class=p>:</span>
<a id=__codelineno-0-8 name=__codelineno-0-8></a><span class=w>    </span><span class=nt>replicated</span><span class=p>:</span>
<a id=__codelineno-0-9 name=__codelineno-0-9></a><span class=w>      </span><span class=nt>size</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id=__codelineno-0-10 name=__codelineno-0-10></a><span class=w>  </span><span class=nt>dataPools</span><span class=p>:</span>
<a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">replicated</span>
<a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=w>      </span><span class=nt>replicated</span><span class=p>:</span>
<a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=w>        </span><span class=nt>size</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id=__codelineno-0-14 name=__codelineno-0-14></a><span class=w>  </span><span class=nt>preserveFilesystemOnDelete</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-0-15 name=__codelineno-0-15></a><span class=w>  </span><span class=nt>metadataServer</span><span class=p>:</span>
<a id=__codelineno-0-16 name=__codelineno-0-16></a><span class=w>    </span><span class=nt>activeCount</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=w>    </span><span class=nt>activeStandby</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></td></tr></table></div> <p>The Rook operator will create all the pools and other resources necessary to start the service. This may take a minute to complete.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span>
<span class=normal><a href=#__codelineno-1-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=gp># </span>Create<span class=w> </span>the<span class=w> </span>filesystem
<a id=__codelineno-1-2 name=__codelineno-1-2></a><span class=go>kubectl create -f filesystem.yaml</span>
<a id=__codelineno-1-3 name=__codelineno-1-3></a><span class=go>[...]</span>
</code></pre></div></td></tr></table></div> <p>To confirm the filesystem is configured, wait for the mds pods to start:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span>
<span class=normal><a href=#__codelineno-2-2>2</a></span>
<span class=normal><a href=#__codelineno-2-3>3</a></span>
<span class=normal><a href=#__codelineno-2-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=gp>$ </span>kubectl<span class=w> </span>-n<span class=w> </span>rook-ceph<span class=w> </span>get<span class=w> </span>pod<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>rook-ceph-mds
<a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=go>NAME                                      READY     STATUS    RESTARTS   AGE</span>
<a id=__codelineno-2-3 name=__codelineno-2-3></a><span class=go>rook-ceph-mds-myfs-7d59fdfcf4-h8kw9       1/1       Running   0          12s</span>
<a id=__codelineno-2-4 name=__codelineno-2-4></a><span class=go>rook-ceph-mds-myfs-7d59fdfcf4-kgkjp       1/1       Running   0          12s</span>
</code></pre></div></td></tr></table></div> <p>To see detailed status of the filesystem, start and connect to the <a href=../../../Troubleshooting/ceph-toolbox/ >Rook toolbox</a>. A new line will be shown with <code>ceph status</code> for the <code>mds</code> service. In this example, there is one active instance of MDS which is up, with one MDS instance in <code>standby-replay</code> mode in case of failover.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1>1</a></span>
<span class=normal><a href=#__codelineno-3-2>2</a></span>
<span class=normal><a href=#__codelineno-3-3>3</a></span>
<span class=normal><a href=#__codelineno-3-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1></a><span class=gp>$ </span>ceph<span class=w> </span>status
<a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=go>[...]</span>
<a id=__codelineno-3-3 name=__codelineno-3-3></a><span class=go>  services:</span>
<a id=__codelineno-3-4 name=__codelineno-3-4></a><span class=go>    mds: myfs-1/1/1 up {[myfs:0]=mzw58b=up:active}, 1 up:standby-replay</span>
</code></pre></div></td></tr></table></div> <h2 id=provision-storage>Provision Storage<a class=headerlink href=#provision-storage title="Permanent link">&para;</a></h2> <p>Before Rook can start provisioning storage, a StorageClass needs to be created based on the filesystem. This is needed for Kubernetes to interoperate with the CSI driver to create persistent volumes.</p> <p>Save this storage class definition as <code>storageclass.yaml</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1> 1</a></span>
<span class=normal><a href=#__codelineno-4-2> 2</a></span>
<span class=normal><a href=#__codelineno-4-3> 3</a></span>
<span class=normal><a href=#__codelineno-4-4> 4</a></span>
<span class=normal><a href=#__codelineno-4-5> 5</a></span>
<span class=normal><a href=#__codelineno-4-6> 6</a></span>
<span class=normal><a href=#__codelineno-4-7> 7</a></span>
<span class=normal><a href=#__codelineno-4-8> 8</a></span>
<span class=normal><a href=#__codelineno-4-9> 9</a></span>
<span class=normal><a href=#__codelineno-4-10>10</a></span>
<span class=normal><a href=#__codelineno-4-11>11</a></span>
<span class=normal><a href=#__codelineno-4-12>12</a></span>
<span class=normal><a href=#__codelineno-4-13>13</a></span>
<span class=normal><a href=#__codelineno-4-14>14</a></span>
<span class=normal><a href=#__codelineno-4-15>15</a></span>
<span class=normal><a href=#__codelineno-4-16>16</a></span>
<span class=normal><a href=#__codelineno-4-17>17</a></span>
<span class=normal><a href=#__codelineno-4-18>18</a></span>
<span class=normal><a href=#__codelineno-4-19>19</a></span>
<span class=normal><a href=#__codelineno-4-20>20</a></span>
<span class=normal><a href=#__codelineno-4-21>21</a></span>
<span class=normal><a href=#__codelineno-4-22>22</a></span>
<span class=normal><a href=#__codelineno-4-23>23</a></span>
<span class=normal><a href=#__codelineno-4-24>24</a></span>
<span class=normal><a href=#__codelineno-4-25>25</a></span>
<span class=normal><a href=#__codelineno-4-26>26</a></span>
<span class=normal><a href=#__codelineno-4-27>27</a></span>
<span class=normal><a href=#__codelineno-4-28>28</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">storage.k8s.io/v1</span>
<a id=__codelineno-4-2 name=__codelineno-4-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">StorageClass</span>
<a id=__codelineno-4-3 name=__codelineno-4-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-4-4 name=__codelineno-4-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-cephfs</span>
<a id=__codelineno-4-5 name=__codelineno-4-5></a><span class=c1># Change &quot;rook-ceph&quot; provisioner prefix to match the operator namespace if needed</span>
<a id=__codelineno-4-6 name=__codelineno-4-6></a><span class=nt>provisioner</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-ceph.cephfs.csi.ceph.com</span>
<a id=__codelineno-4-7 name=__codelineno-4-7></a><span class=nt>parameters</span><span class=p>:</span>
<a id=__codelineno-4-8 name=__codelineno-4-8></a><span class=w>  </span><span class=c1># clusterID is the namespace where the rook cluster is running</span>
<a id=__codelineno-4-9 name=__codelineno-4-9></a><span class=w>  </span><span class=c1># If you change this namespace, also change the namespace below where the secret namespaces are defined</span>
<a id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>  </span><span class=nt>clusterID</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-ceph</span>
<a id=__codelineno-4-11 name=__codelineno-4-11></a>
<a id=__codelineno-4-12 name=__codelineno-4-12></a><span class=w>  </span><span class=c1># CephFS filesystem name into which the volume shall be created</span>
<a id=__codelineno-4-13 name=__codelineno-4-13></a><span class=w>  </span><span class=nt>fsName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">myfs</span>
<a id=__codelineno-4-14 name=__codelineno-4-14></a>
<a id=__codelineno-4-15 name=__codelineno-4-15></a><span class=w>  </span><span class=c1># Ceph pool into which the volume shall be created</span>
<a id=__codelineno-4-16 name=__codelineno-4-16></a><span class=w>  </span><span class=c1># Required for provisionVolume: &quot;true&quot;</span>
<a id=__codelineno-4-17 name=__codelineno-4-17></a><span class=w>  </span><span class=nt>pool</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">myfs-replicated</span>
<a id=__codelineno-4-18 name=__codelineno-4-18></a>
<a id=__codelineno-4-19 name=__codelineno-4-19></a><span class=w>  </span><span class=c1># The secrets contain Ceph admin credentials. These are generated automatically by the operator</span>
<a id=__codelineno-4-20 name=__codelineno-4-20></a><span class=w>  </span><span class=c1># in the same namespace as the cluster.</span>
<a id=__codelineno-4-21 name=__codelineno-4-21></a><span class=w>  </span><span class=nt>csi.storage.k8s.io/provisioner-secret-name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-csi-cephfs-provisioner</span>
<a id=__codelineno-4-22 name=__codelineno-4-22></a><span class=w>  </span><span class=nt>csi.storage.k8s.io/provisioner-secret-namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-ceph</span>
<a id=__codelineno-4-23 name=__codelineno-4-23></a><span class=w>  </span><span class=nt>csi.storage.k8s.io/controller-expand-secret-name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-csi-cephfs-provisioner</span>
<a id=__codelineno-4-24 name=__codelineno-4-24></a><span class=w>  </span><span class=nt>csi.storage.k8s.io/controller-expand-secret-namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-ceph</span>
<a id=__codelineno-4-25 name=__codelineno-4-25></a><span class=w>  </span><span class=nt>csi.storage.k8s.io/node-stage-secret-name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-csi-cephfs-node</span>
<a id=__codelineno-4-26 name=__codelineno-4-26></a><span class=w>  </span><span class=nt>csi.storage.k8s.io/node-stage-secret-namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-ceph</span>
<a id=__codelineno-4-27 name=__codelineno-4-27></a>
<a id=__codelineno-4-28 name=__codelineno-4-28></a><span class=nt>reclaimPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Delete</span>
</code></pre></div></td></tr></table></div> <p>If you've deployed the Rook operator in a namespace other than "rook-ceph" as is common change the prefix in the provisioner to match the namespace you used. For example, if the Rook operator is running in "rook-op" the provisioner value should be "rook-op.rbd.csi.ceph.com".</p> <p>Create the storage class.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class=go>kubectl create -f deploy/examples/csi/cephfs/storageclass.yaml</span>
</code></pre></div></td></tr></table></div> <h2 id=quotas>Quotas<a class=headerlink href=#quotas title="Permanent link">&para;</a></h2> <div class="admonition attention"> <p class=admonition-title>Attention</p> <p>The CephFS CSI driver uses quotas to enforce the PVC size requested.</p> </div> <p>Only newer kernels support CephFS quotas (kernel version of at least 4.17). If you require quotas to be enforced and the kernel driver does not support it, you can disable the kernel driver and use the FUSE client. This can be done by setting <code>CSI_FORCE_CEPHFS_KERNEL_CLIENT: false</code> in the operator deployment (<code>operator.yaml</code>). However, it is important to know that when the FUSE client is enabled, there is an issue that during upgrade the application pods will be disconnected from the mount and will need to be restarted. See the <a href=../../../Upgrade/rook-upgrade/ >upgrade guide</a> for more details.</p> <h2 id=consume-the-shared-filesystem-k8s-registry-sample>Consume the Shared Filesystem: K8s Registry Sample<a class=headerlink href=#consume-the-shared-filesystem-k8s-registry-sample title="Permanent link">&para;</a></h2> <p>As an example, we will start the kube-registry pod with the shared filesystem as the backing store. Save the following spec as <code>kube-registry.yaml</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1> 1</a></span>
<span class=normal><a href=#__codelineno-6-2> 2</a></span>
<span class=normal><a href=#__codelineno-6-3> 3</a></span>
<span class=normal><a href=#__codelineno-6-4> 4</a></span>
<span class=normal><a href=#__codelineno-6-5> 5</a></span>
<span class=normal><a href=#__codelineno-6-6> 6</a></span>
<span class=normal><a href=#__codelineno-6-7> 7</a></span>
<span class=normal><a href=#__codelineno-6-8> 8</a></span>
<span class=normal><a href=#__codelineno-6-9> 9</a></span>
<span class=normal><a href=#__codelineno-6-10>10</a></span>
<span class=normal><a href=#__codelineno-6-11>11</a></span>
<span class=normal><a href=#__codelineno-6-12>12</a></span>
<span class=normal><a href=#__codelineno-6-13>13</a></span>
<span class=normal><a href=#__codelineno-6-14>14</a></span>
<span class=normal><a href=#__codelineno-6-15>15</a></span>
<span class=normal><a href=#__codelineno-6-16>16</a></span>
<span class=normal><a href=#__codelineno-6-17>17</a></span>
<span class=normal><a href=#__codelineno-6-18>18</a></span>
<span class=normal><a href=#__codelineno-6-19>19</a></span>
<span class=normal><a href=#__codelineno-6-20>20</a></span>
<span class=normal><a href=#__codelineno-6-21>21</a></span>
<span class=normal><a href=#__codelineno-6-22>22</a></span>
<span class=normal><a href=#__codelineno-6-23>23</a></span>
<span class=normal><a href=#__codelineno-6-24>24</a></span>
<span class=normal><a href=#__codelineno-6-25>25</a></span>
<span class=normal><a href=#__codelineno-6-26>26</a></span>
<span class=normal><a href=#__codelineno-6-27>27</a></span>
<span class=normal><a href=#__codelineno-6-28>28</a></span>
<span class=normal><a href=#__codelineno-6-29>29</a></span>
<span class=normal><a href=#__codelineno-6-30>30</a></span>
<span class=normal><a href=#__codelineno-6-31>31</a></span>
<span class=normal><a href=#__codelineno-6-32>32</a></span>
<span class=normal><a href=#__codelineno-6-33>33</a></span>
<span class=normal><a href=#__codelineno-6-34>34</a></span>
<span class=normal><a href=#__codelineno-6-35>35</a></span>
<span class=normal><a href=#__codelineno-6-36>36</a></span>
<span class=normal><a href=#__codelineno-6-37>37</a></span>
<span class=normal><a href=#__codelineno-6-38>38</a></span>
<span class=normal><a href=#__codelineno-6-39>39</a></span>
<span class=normal><a href=#__codelineno-6-40>40</a></span>
<span class=normal><a href=#__codelineno-6-41>41</a></span>
<span class=normal><a href=#__codelineno-6-42>42</a></span>
<span class=normal><a href=#__codelineno-6-43>43</a></span>
<span class=normal><a href=#__codelineno-6-44>44</a></span>
<span class=normal><a href=#__codelineno-6-45>45</a></span>
<span class=normal><a href=#__codelineno-6-46>46</a></span>
<span class=normal><a href=#__codelineno-6-47>47</a></span>
<span class=normal><a href=#__codelineno-6-48>48</a></span>
<span class=normal><a href=#__codelineno-6-49>49</a></span>
<span class=normal><a href=#__codelineno-6-50>50</a></span>
<span class=normal><a href=#__codelineno-6-51>51</a></span>
<span class=normal><a href=#__codelineno-6-52>52</a></span>
<span class=normal><a href=#__codelineno-6-53>53</a></span>
<span class=normal><a href=#__codelineno-6-54>54</a></span>
<span class=normal><a href=#__codelineno-6-55>55</a></span>
<span class=normal><a href=#__codelineno-6-56>56</a></span>
<span class=normal><a href=#__codelineno-6-57>57</a></span>
<span class=normal><a href=#__codelineno-6-58>58</a></span>
<span class=normal><a href=#__codelineno-6-59>59</a></span>
<span class=normal><a href=#__codelineno-6-60>60</a></span>
<span class=normal><a href=#__codelineno-6-61>61</a></span>
<span class=normal><a href=#__codelineno-6-62>62</a></span>
<span class=normal><a href=#__codelineno-6-63>63</a></span>
<span class=normal><a href=#__codelineno-6-64>64</a></span>
<span class=normal><a href=#__codelineno-6-65>65</a></span>
<span class=normal><a href=#__codelineno-6-66>66</a></span>
<span class=normal><a href=#__codelineno-6-67>67</a></span>
<span class=normal><a href=#__codelineno-6-68>68</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id=__codelineno-6-2 name=__codelineno-6-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolumeClaim</span>
<a id=__codelineno-6-3 name=__codelineno-6-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-6-4 name=__codelineno-6-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cephfs-pvc</span>
<a id=__codelineno-6-5 name=__codelineno-6-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<a id=__codelineno-6-6 name=__codelineno-6-6></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-6-7 name=__codelineno-6-7></a><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span>
<a id=__codelineno-6-8 name=__codelineno-6-8></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteMany</span>
<a id=__codelineno-6-9 name=__codelineno-6-9></a><span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
<a id=__codelineno-6-10 name=__codelineno-6-10></a><span class=w>    </span><span class=nt>requests</span><span class=p>:</span>
<a id=__codelineno-6-11 name=__codelineno-6-11></a><span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1Gi</span>
<a id=__codelineno-6-12 name=__codelineno-6-12></a><span class=w>  </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-cephfs</span>
<a id=__codelineno-6-13 name=__codelineno-6-13></a><span class=nn>---</span>
<a id=__codelineno-6-14 name=__codelineno-6-14></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<a id=__codelineno-6-15 name=__codelineno-6-15></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<a id=__codelineno-6-16 name=__codelineno-6-16></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-6-17 name=__codelineno-6-17></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-registry</span>
<a id=__codelineno-6-18 name=__codelineno-6-18></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<a id=__codelineno-6-19 name=__codelineno-6-19></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
<a id=__codelineno-6-20 name=__codelineno-6-20></a><span class=w>    </span><span class=nt>k8s-app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-registry</span>
<a id=__codelineno-6-21 name=__codelineno-6-21></a><span class=w>    </span><span class=nt>kubernetes.io/cluster-service</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
<a id=__codelineno-6-22 name=__codelineno-6-22></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-6-23 name=__codelineno-6-23></a><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id=__codelineno-6-24 name=__codelineno-6-24></a><span class=w>  </span><span class=nt>selector</span><span class=p>:</span>
<a id=__codelineno-6-25 name=__codelineno-6-25></a><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span>
<a id=__codelineno-6-26 name=__codelineno-6-26></a><span class=w>      </span><span class=nt>k8s-app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-registry</span>
<a id=__codelineno-6-27 name=__codelineno-6-27></a><span class=w>  </span><span class=nt>template</span><span class=p>:</span>
<a id=__codelineno-6-28 name=__codelineno-6-28></a><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-6-29 name=__codelineno-6-29></a><span class=w>      </span><span class=nt>labels</span><span class=p>:</span>
<a id=__codelineno-6-30 name=__codelineno-6-30></a><span class=w>        </span><span class=nt>k8s-app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-registry</span>
<a id=__codelineno-6-31 name=__codelineno-6-31></a><span class=w>        </span><span class=nt>kubernetes.io/cluster-service</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
<a id=__codelineno-6-32 name=__codelineno-6-32></a><span class=w>    </span><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-6-33 name=__codelineno-6-33></a><span class=w>      </span><span class=nt>containers</span><span class=p>:</span>
<a id=__codelineno-6-34 name=__codelineno-6-34></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry</span>
<a id=__codelineno-6-35 name=__codelineno-6-35></a><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry:2</span>
<a id=__codelineno-6-36 name=__codelineno-6-36></a><span class=w>        </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Always</span>
<a id=__codelineno-6-37 name=__codelineno-6-37></a><span class=w>        </span><span class=nt>resources</span><span class=p>:</span>
<a id=__codelineno-6-38 name=__codelineno-6-38></a><span class=w>          </span><span class=nt>limits</span><span class=p>:</span>
<a id=__codelineno-6-39 name=__codelineno-6-39></a><span class=w>            </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100m</span>
<a id=__codelineno-6-40 name=__codelineno-6-40></a><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100Mi</span>
<a id=__codelineno-6-41 name=__codelineno-6-41></a><span class=w>        </span><span class=nt>env</span><span class=p>:</span>
<a id=__codelineno-6-42 name=__codelineno-6-42></a><span class=w>        </span><span class=c1># Configuration reference: https://docs.docker.com/registry/configuration/</span>
<a id=__codelineno-6-43 name=__codelineno-6-43></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">REGISTRY_HTTP_ADDR</span>
<a id=__codelineno-6-44 name=__codelineno-6-44></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">:5000</span>
<a id=__codelineno-6-45 name=__codelineno-6-45></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">REGISTRY_HTTP_SECRET</span>
<a id=__codelineno-6-46 name=__codelineno-6-46></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Ple4seCh4ngeThisN0tAVerySecretV4lue&quot;</span>
<a id=__codelineno-6-47 name=__codelineno-6-47></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY</span>
<a id=__codelineno-6-48 name=__codelineno-6-48></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/registry</span>
<a id=__codelineno-6-49 name=__codelineno-6-49></a><span class=w>        </span><span class=nt>volumeMounts</span><span class=p>:</span>
<a id=__codelineno-6-50 name=__codelineno-6-50></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">image-store</span>
<a id=__codelineno-6-51 name=__codelineno-6-51></a><span class=w>          </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/registry</span>
<a id=__codelineno-6-52 name=__codelineno-6-52></a><span class=w>        </span><span class=nt>ports</span><span class=p>:</span>
<a id=__codelineno-6-53 name=__codelineno-6-53></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<a id=__codelineno-6-54 name=__codelineno-6-54></a><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry</span>
<a id=__codelineno-6-55 name=__codelineno-6-55></a><span class=w>          </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<a id=__codelineno-6-56 name=__codelineno-6-56></a><span class=w>        </span><span class=nt>livenessProbe</span><span class=p>:</span>
<a id=__codelineno-6-57 name=__codelineno-6-57></a><span class=w>          </span><span class=nt>httpGet</span><span class=p>:</span>
<a id=__codelineno-6-58 name=__codelineno-6-58></a><span class=w>            </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id=__codelineno-6-59 name=__codelineno-6-59></a><span class=w>            </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry</span>
<a id=__codelineno-6-60 name=__codelineno-6-60></a><span class=w>        </span><span class=nt>readinessProbe</span><span class=p>:</span>
<a id=__codelineno-6-61 name=__codelineno-6-61></a><span class=w>          </span><span class=nt>httpGet</span><span class=p>:</span>
<a id=__codelineno-6-62 name=__codelineno-6-62></a><span class=w>            </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id=__codelineno-6-63 name=__codelineno-6-63></a><span class=w>            </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry</span>
<a id=__codelineno-6-64 name=__codelineno-6-64></a><span class=w>      </span><span class=nt>volumes</span><span class=p>:</span>
<a id=__codelineno-6-65 name=__codelineno-6-65></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">image-store</span>
<a id=__codelineno-6-66 name=__codelineno-6-66></a><span class=w>        </span><span class=nt>persistentVolumeClaim</span><span class=p>:</span>
<a id=__codelineno-6-67 name=__codelineno-6-67></a><span class=w>          </span><span class=nt>claimName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cephfs-pvc</span>
<a id=__codelineno-6-68 name=__codelineno-6-68></a><span class=w>          </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div></td></tr></table></div> <p>Create the Kube registry deployment:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=go>kubectl create -f deploy/examples/csi/cephfs/kube-registry.yaml</span>
</code></pre></div></td></tr></table></div> <p>You now have a docker registry which is HA with persistent storage.</p> <h3 id=kernel-version-requirement>Kernel Version Requirement<a class=headerlink href=#kernel-version-requirement title="Permanent link">&para;</a></h3> <p>If the Rook cluster has more than one filesystem and the application pod is scheduled to a node with kernel version older than 4.7, inconsistent results may arise since kernels older than 4.7 do not support specifying filesystem namespaces.</p> <h2 id=consume-the-shared-filesystem-toolbox>Consume the Shared Filesystem: Toolbox<a class=headerlink href=#consume-the-shared-filesystem-toolbox title="Permanent link">&para;</a></h2> <p>Once you have pushed an image to the registry (see the <a href=https://github.com/kubernetes/kubernetes/tree/release-1.9/cluster/addons/registry>instructions</a> to expose and use the kube-registry), verify that kube-registry is using the filesystem that was configured above by mounting the shared filesystem in the toolbox pod. See the <a href=../../../Troubleshooting/direct-tools/#shared-filesystem-tools>Direct Filesystem</a> topic for more details.</p> <h2 id=consume-the-shared-filesystem-across-namespaces>Consume the Shared Filesystem across namespaces<a class=headerlink href=#consume-the-shared-filesystem-across-namespaces title="Permanent link">&para;</a></h2> <p>A PVC that you create using the <code>rook-cephfs</code> storageClass can be shared between different Pods simultaneously, either read-write or read-only, but is restricted to a single namespace (a PVC is a namespace-scoped resource, so you cannot use it in another one).</p> <p>However there are some use cases where you want to share the content from a CephFS-based PVC among different Pods in different namespaces, for a shared library for example, or a collaboration workspace between applications running in different namespaces.</p> <p>You can do that using the following recipe.</p> <h3 id=shared-volume-creation>Shared volume creation<a class=headerlink href=#shared-volume-creation title="Permanent link">&para;</a></h3> <ul> <li>In the <code>rook</code> namespace, create a copy of the secret <code>rook-csi-cephfs-node</code>, name it <code>rook-csi-cephfs-node-user</code> .</li> <li>Edit your new secret, changing the name of the keys (keep the value as it is):</li> <li><code>adminID</code> -&gt; <code>userID</code></li> <li><code>adminKey</code> -&gt; <code>userKey</code></li> <li>Create the PVC you want to share, for example:</li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1> 1</a></span>
<span class=normal><a href=#__codelineno-8-2> 2</a></span>
<span class=normal><a href=#__codelineno-8-3> 3</a></span>
<span class=normal><a href=#__codelineno-8-4> 4</a></span>
<span class=normal><a href=#__codelineno-8-5> 5</a></span>
<span class=normal><a href=#__codelineno-8-6> 6</a></span>
<span class=normal><a href=#__codelineno-8-7> 7</a></span>
<span class=normal><a href=#__codelineno-8-8> 8</a></span>
<span class=normal><a href=#__codelineno-8-9> 9</a></span>
<span class=normal><a href=#__codelineno-8-10>10</a></span>
<span class=normal><a href=#__codelineno-8-11>11</a></span>
<span class=normal><a href=#__codelineno-8-12>12</a></span>
<span class=normal><a href=#__codelineno-8-13>13</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolumeClaim</span>
<a id=__codelineno-8-2 name=__codelineno-8-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-8-4 name=__codelineno-8-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">base-pvc</span>
<a id=__codelineno-8-5 name=__codelineno-8-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">first-namespace</span>
<a id=__codelineno-8-6 name=__codelineno-8-6></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-8-7 name=__codelineno-8-7></a><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span>
<a id=__codelineno-8-8 name=__codelineno-8-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteMany</span>
<a id=__codelineno-8-9 name=__codelineno-8-9></a><span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
<a id=__codelineno-8-10 name=__codelineno-8-10></a><span class=w>    </span><span class=nt>requests</span><span class=p>:</span>
<a id=__codelineno-8-11 name=__codelineno-8-11></a><span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100Gi</span>
<a id=__codelineno-8-12 name=__codelineno-8-12></a><span class=w>  </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-cephfs</span>
<a id=__codelineno-8-13 name=__codelineno-8-13></a><span class=w>  </span><span class=nt>volumeMode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Filesystem</span>
</code></pre></div></td></tr></table></div> <ul> <li>The corresponding PV that is created will have all the necessary info to connect to the CephFS volume (all non-necessary information are removed here):</li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1> 1</a></span>
<span class=normal><a href=#__codelineno-9-2> 2</a></span>
<span class=normal><a href=#__codelineno-9-3> 3</a></span>
<span class=normal><a href=#__codelineno-9-4> 4</a></span>
<span class=normal><a href=#__codelineno-9-5> 5</a></span>
<span class=normal><a href=#__codelineno-9-6> 6</a></span>
<span class=normal><a href=#__codelineno-9-7> 7</a></span>
<span class=normal><a href=#__codelineno-9-8> 8</a></span>
<span class=normal><a href=#__codelineno-9-9> 9</a></span>
<span class=normal><a href=#__codelineno-9-10>10</a></span>
<span class=normal><a href=#__codelineno-9-11>11</a></span>
<span class=normal><a href=#__codelineno-9-12>12</a></span>
<span class=normal><a href=#__codelineno-9-13>13</a></span>
<span class=normal><a href=#__codelineno-9-14>14</a></span>
<span class=normal><a href=#__codelineno-9-15>15</a></span>
<span class=normal><a href=#__codelineno-9-16>16</a></span>
<span class=normal><a href=#__codelineno-9-17>17</a></span>
<span class=normal><a href=#__codelineno-9-18>18</a></span>
<span class=normal><a href=#__codelineno-9-19>19</a></span>
<span class=normal><a href=#__codelineno-9-20>20</a></span>
<span class=normal><a href=#__codelineno-9-21>21</a></span>
<span class=normal><a href=#__codelineno-9-22>22</a></span>
<span class=normal><a href=#__codelineno-9-23>23</a></span>
<span class=normal><a href=#__codelineno-9-24>24</a></span>
<span class=normal><a href=#__codelineno-9-25>25</a></span>
<span class=normal><a href=#__codelineno-9-26>26</a></span>
<span class=normal><a href=#__codelineno-9-27>27</a></span>
<span class=normal><a href=#__codelineno-9-28>28</a></span>
<span class=normal><a href=#__codelineno-9-29>29</a></span>
<span class=normal><a href=#__codelineno-9-30>30</a></span>
<span class=normal><a href=#__codelineno-9-31>31</a></span>
<span class=normal><a href=#__codelineno-9-32>32</a></span>
<span class=normal><a href=#__codelineno-9-33>33</a></span>
<span class=normal><a href=#__codelineno-9-34>34</a></span>
<span class=normal><a href=#__codelineno-9-35>35</a></span>
<span class=normal><a href=#__codelineno-9-36>36</a></span>
<span class=normal><a href=#__codelineno-9-37>37</a></span>
<span class=normal><a href=#__codelineno-9-38>38</a></span>
<span class=normal><a href=#__codelineno-9-39>39</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolume</span>
<a id=__codelineno-9-2 name=__codelineno-9-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id=__codelineno-9-3 name=__codelineno-9-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-9-4 name=__codelineno-9-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pvc-a02dd277-cb26-4c1e-9434-478ebc321e22</span>
<a id=__codelineno-9-5 name=__codelineno-9-5></a><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span>
<a id=__codelineno-9-6 name=__codelineno-9-6></a><span class=w>    </span><span class=nt>pv.kubernetes.io/provisioned-by</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook.cephfs.csi.ceph.com</span>
<a id=__codelineno-9-7 name=__codelineno-9-7></a><span class=w>  </span><span class=nt>finalizers</span><span class=p>:</span>
<a id=__codelineno-9-8 name=__codelineno-9-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/pv-protection</span>
<a id=__codelineno-9-9 name=__codelineno-9-9></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-9-10 name=__codelineno-9-10></a><span class=w>  </span><span class=nt>capacity</span><span class=p>:</span>
<a id=__codelineno-9-11 name=__codelineno-9-11></a><span class=w>    </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100Gi</span>
<a id=__codelineno-9-12 name=__codelineno-9-12></a><span class=w>  </span><span class=nt>csi</span><span class=p>:</span>
<a id=__codelineno-9-13 name=__codelineno-9-13></a><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook.cephfs.csi.ceph.com</span>
<a id=__codelineno-9-14 name=__codelineno-9-14></a><span class=w>    </span><span class=nt>volumeHandle</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;-</span>
<a id=__codelineno-9-15 name=__codelineno-9-15></a><span class=w>      </span><span class=no>0001-0011-rook-0000000000000001-8a528de0-e274-11ec-b069-0a580a800213</span>
<a id=__codelineno-9-16 name=__codelineno-9-16></a><span class=w>    </span><span class=nt>volumeAttributes</span><span class=p>:</span>
<a id=__codelineno-9-17 name=__codelineno-9-17></a><span class=w>      </span><span class=nt>clusterID</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook</span>
<a id=__codelineno-9-18 name=__codelineno-9-18></a><span class=w>      </span><span class=nt>fsName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-cephfilesystem</span>
<a id=__codelineno-9-19 name=__codelineno-9-19></a><span class=w>      </span><span class=nt>storage.kubernetes.io/csiProvisionerIdentity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1654174264855-8081-rook.cephfs.csi.ceph.com</span>
<a id=__codelineno-9-20 name=__codelineno-9-20></a><span class=w>      </span><span class=nt>subvolumeName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">csi-vol-8a528de0-e274-11ec-b069-0a580a800213</span>
<a id=__codelineno-9-21 name=__codelineno-9-21></a><span class=w>      </span><span class=nt>subvolumePath</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;-</span>
<a id=__codelineno-9-22 name=__codelineno-9-22></a><span class=w>        </span><span class=no>/volumes/csi/csi-vol-8a528de0-e274-11ec-b069-0a580a800213/da98fb83-fff3-485a-a0a9-57c227cb67ec</span>
<a id=__codelineno-9-23 name=__codelineno-9-23></a><span class=w>    </span><span class=nt>nodeStageSecretRef</span><span class=p>:</span>
<a id=__codelineno-9-24 name=__codelineno-9-24></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-csi-cephfs-node</span>
<a id=__codelineno-9-25 name=__codelineno-9-25></a><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook</span>
<a id=__codelineno-9-26 name=__codelineno-9-26></a><span class=w>    </span><span class=nt>controllerExpandSecretRef</span><span class=p>:</span>
<a id=__codelineno-9-27 name=__codelineno-9-27></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-csi-cephfs-provisioner</span>
<a id=__codelineno-9-28 name=__codelineno-9-28></a><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook</span>
<a id=__codelineno-9-29 name=__codelineno-9-29></a><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span>
<a id=__codelineno-9-30 name=__codelineno-9-30></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteMany</span>
<a id=__codelineno-9-31 name=__codelineno-9-31></a><span class=w>  </span><span class=nt>claimRef</span><span class=p>:</span>
<a id=__codelineno-9-32 name=__codelineno-9-32></a><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolumeClaim</span>
<a id=__codelineno-9-33 name=__codelineno-9-33></a><span class=w>    </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">first-namespace</span>
<a id=__codelineno-9-34 name=__codelineno-9-34></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">base-pvc</span>
<a id=__codelineno-9-35 name=__codelineno-9-35></a><span class=w>    </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id=__codelineno-9-36 name=__codelineno-9-36></a><span class=w>    </span><span class=nt>resourceVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;49728&#39;</span>
<a id=__codelineno-9-37 name=__codelineno-9-37></a><span class=w>  </span><span class=nt>persistentVolumeReclaimPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Retain</span>
<a id=__codelineno-9-38 name=__codelineno-9-38></a><span class=w>  </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-cephfs</span>
<a id=__codelineno-9-39 name=__codelineno-9-39></a><span class=w>  </span><span class=nt>volumeMode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Filesystem</span>
</code></pre></div></td></tr></table></div> <ul> <li> <p>On this PV, change the <code>persistentVolumeReclaimPolicy</code> parameter to <code>Retain</code> to avoid it from being deleted when you will delete PVCs. Don't forget to change it back to <code>Delete</code> when you want to remove the shared volume (see full procedure in the next section).</p> </li> <li> <p>Copy the YAML content of the PV, and create a new static PV with the same information and some modifications. From the original YAML, you must:</p> </li> <li>Modify the original name. To keep track, the best solution is to append to the original name the namespace name where you want your new PV. In this example <code>newnamespace</code>.</li> <li>Modify the volumeHandle. Again append the targeted namespace.</li> <li>Add the <code>staticVolume: "true"</code> entry to the volumeAttributes.</li> <li>Add the rootPath entry to the volumeAttributes, with the same content as <code>subvolumePath</code>.</li> <li>In the <code>nodeStageSecretRef</code> section, change the name to point to the secret you created earlier, <code>rook-csi-cephfs-node-user</code>.</li> <li>Remove the unnecessary information before applying the YAML (claimRef, managedFields,...):</li> </ul> <p>Your YAML should look like this:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1> 1</a></span>
<span class=normal><a href=#__codelineno-10-2> 2</a></span>
<span class=normal><a href=#__codelineno-10-3> 3</a></span>
<span class=normal><a href=#__codelineno-10-4> 4</a></span>
<span class=normal><a href=#__codelineno-10-5> 5</a></span>
<span class=normal><a href=#__codelineno-10-6> 6</a></span>
<span class=normal><a href=#__codelineno-10-7> 7</a></span>
<span class=normal><a href=#__codelineno-10-8> 8</a></span>
<span class=normal><a href=#__codelineno-10-9> 9</a></span>
<span class=normal><a href=#__codelineno-10-10>10</a></span>
<span class=normal><a href=#__codelineno-10-11>11</a></span>
<span class=normal><a href=#__codelineno-10-12>12</a></span>
<span class=normal><a href=#__codelineno-10-13>13</a></span>
<span class=normal><a href=#__codelineno-10-14>14</a></span>
<span class=normal><a href=#__codelineno-10-15>15</a></span>
<span class=normal><a href=#__codelineno-10-16>16</a></span>
<span class=normal><a href=#__codelineno-10-17>17</a></span>
<span class=normal><a href=#__codelineno-10-18>18</a></span>
<span class=normal><a href=#__codelineno-10-19>19</a></span>
<span class=normal><a href=#__codelineno-10-20>20</a></span>
<span class=normal><a href=#__codelineno-10-21>21</a></span>
<span class=normal><a href=#__codelineno-10-22>22</a></span>
<span class=normal><a href=#__codelineno-10-23>23</a></span>
<span class=normal><a href=#__codelineno-10-24>24</a></span>
<span class=normal><a href=#__codelineno-10-25>25</a></span>
<span class=normal><a href=#__codelineno-10-26>26</a></span>
<span class=normal><a href=#__codelineno-10-27>27</a></span>
<span class=normal><a href=#__codelineno-10-28>28</a></span>
<span class=normal><a href=#__codelineno-10-29>29</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolume</span>
<a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id=__codelineno-10-3 name=__codelineno-10-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-10-4 name=__codelineno-10-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pvc-a02dd277-cb26-4c1e-9434-478ebc321e22-newnamespace</span>
<a id=__codelineno-10-5 name=__codelineno-10-5></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-10-6 name=__codelineno-10-6></a><span class=w>  </span><span class=nt>capacity</span><span class=p>:</span>
<a id=__codelineno-10-7 name=__codelineno-10-7></a><span class=w>    </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100Gi</span>
<a id=__codelineno-10-8 name=__codelineno-10-8></a><span class=w>  </span><span class=nt>csi</span><span class=p>:</span>
<a id=__codelineno-10-9 name=__codelineno-10-9></a><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook.cephfs.csi.ceph.com</span>
<a id=__codelineno-10-10 name=__codelineno-10-10></a><span class=w>    </span><span class=nt>volumeHandle</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;-</span>
<a id=__codelineno-10-11 name=__codelineno-10-11></a><span class=w>      </span><span class=no>0001-0011-rook-0000000000000001-8a528de0-e274-11ec-b069-0a580a800213-newnamespace</span>
<a id=__codelineno-10-12 name=__codelineno-10-12></a><span class=w>    </span><span class=nt>volumeAttributes</span><span class=p>:</span>
<a id=__codelineno-10-13 name=__codelineno-10-13></a><span class=w>      </span><span class=nt>clusterID</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook</span>
<a id=__codelineno-10-14 name=__codelineno-10-14></a><span class=w>      </span><span class=nt>fsName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-cephfilesystem</span>
<a id=__codelineno-10-15 name=__codelineno-10-15></a><span class=w>      </span><span class=nt>storage.kubernetes.io/csiProvisionerIdentity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1654174264855-8081-rook.cephfs.csi.ceph.com</span>
<a id=__codelineno-10-16 name=__codelineno-10-16></a><span class=w>      </span><span class=nt>subvolumeName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">csi-vol-8a528de0-e274-11ec-b069-0a580a800213</span>
<a id=__codelineno-10-17 name=__codelineno-10-17></a><span class=w>      </span><span class=nt>subvolumePath</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;-</span>
<a id=__codelineno-10-18 name=__codelineno-10-18></a><span class=w>        </span><span class=no>/volumes/csi/csi-vol-8a528de0-e274-11ec-b069-0a580a800213/da98fb83-fff3-485a-a0a9-57c227cb67ec</span>
<a id=__codelineno-10-19 name=__codelineno-10-19></a><span class=w>      </span><span class=nt>rootPath</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;-</span>
<a id=__codelineno-10-20 name=__codelineno-10-20></a><span class=w>        </span><span class=no>/volumes/csi/csi-vol-8a528de0-e274-11ec-b069-0a580a800213/da98fb83-fff3-485a-a0a9-57c227cb67ec</span>
<a id=__codelineno-10-21 name=__codelineno-10-21></a><span class=w>      </span><span class=nt>staticVolume</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
<a id=__codelineno-10-22 name=__codelineno-10-22></a><span class=w>    </span><span class=nt>nodeStageSecretRef</span><span class=p>:</span>
<a id=__codelineno-10-23 name=__codelineno-10-23></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-csi-cephfs-node</span>
<a id=__codelineno-10-24 name=__codelineno-10-24></a><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook</span>
<a id=__codelineno-10-25 name=__codelineno-10-25></a><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span>
<a id=__codelineno-10-26 name=__codelineno-10-26></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteMany</span>
<a id=__codelineno-10-27 name=__codelineno-10-27></a><span class=w>  </span><span class=nt>persistentVolumeReclaimPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Retain</span>
<a id=__codelineno-10-28 name=__codelineno-10-28></a><span class=w>  </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-cephfs</span>
<a id=__codelineno-10-29 name=__codelineno-10-29></a><span class=w>  </span><span class=nt>volumeMode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Filesystem</span>
</code></pre></div></td></tr></table></div> <ul> <li>In a new or other namespace, create a new PVC that will use this new PV you created. You simply have to point to it in the <code>volumeName</code> parameter. Make sure you enter the same size as the original PVC!:</li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1> 1</a></span>
<span class=normal><a href=#__codelineno-11-2> 2</a></span>
<span class=normal><a href=#__codelineno-11-3> 3</a></span>
<span class=normal><a href=#__codelineno-11-4> 4</a></span>
<span class=normal><a href=#__codelineno-11-5> 5</a></span>
<span class=normal><a href=#__codelineno-11-6> 6</a></span>
<span class=normal><a href=#__codelineno-11-7> 7</a></span>
<span class=normal><a href=#__codelineno-11-8> 8</a></span>
<span class=normal><a href=#__codelineno-11-9> 9</a></span>
<span class=normal><a href=#__codelineno-11-10>10</a></span>
<span class=normal><a href=#__codelineno-11-11>11</a></span>
<span class=normal><a href=#__codelineno-11-12>12</a></span>
<span class=normal><a href=#__codelineno-11-13>13</a></span>
<span class=normal><a href=#__codelineno-11-14>14</a></span>
<span class=normal><a href=#__codelineno-11-15>15</a></span>
<span class=normal><a href=#__codelineno-11-16>16</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolumeClaim</span>
<a id=__codelineno-11-2 name=__codelineno-11-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id=__codelineno-11-3 name=__codelineno-11-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-11-4 name=__codelineno-11-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">second-pvc</span>
<a id=__codelineno-11-5 name=__codelineno-11-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">newnamespace</span>
<a id=__codelineno-11-6 name=__codelineno-11-6></a><span class=w>  </span><span class=nt>finalizers</span><span class=p>:</span>
<a id=__codelineno-11-7 name=__codelineno-11-7></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/pvc-protection</span>
<a id=__codelineno-11-8 name=__codelineno-11-8></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-11-9 name=__codelineno-11-9></a><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span>
<a id=__codelineno-11-10 name=__codelineno-11-10></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteMany</span>
<a id=__codelineno-11-11 name=__codelineno-11-11></a><span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
<a id=__codelineno-11-12 name=__codelineno-11-12></a><span class=w>    </span><span class=nt>requests</span><span class=p>:</span>
<a id=__codelineno-11-13 name=__codelineno-11-13></a><span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100Gi</span>
<a id=__codelineno-11-14 name=__codelineno-11-14></a><span class=w>  </span><span class=nt>volumeName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pvc-a02dd277-cb26-4c1e-9434-478ebc321e22-newnamespace</span>
<a id=__codelineno-11-15 name=__codelineno-11-15></a><span class=w>  </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-cephfs</span>
<a id=__codelineno-11-16 name=__codelineno-11-16></a><span class=w>  </span><span class=nt>volumeMode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Filesystem</span>
</code></pre></div></td></tr></table></div> <p>You have now access to the same CephFS subvolume from different PVCs in different namespaces. Redo the previous steps (copy PV with a new name, create a PVC pointing to it) in each namespace you want to use this subvolume.</p> <p><strong>Note</strong>: the new PVCs/PVs we have created are static. Therefore CephCSI does not support snapshots, clones, resizing or delete operations for them. If those operations are required, you must make them on the original PVC.</p> <h3 id=shared-volume-removal>Shared volume removal<a class=headerlink href=#shared-volume-removal title="Permanent link">&para;</a></h3> <p>As the same CephFS volume is used by different PVCs/PVs, you must proceed very orderly to remove it properly.</p> <ul> <li>Delete the static PVCs in the different namespaces, but keep the original one!</li> <li>Delete the corresponding static PVs that should now have been marked as "Released". Again, don't delete the original one yet!</li> <li>Edit the original PV, changing back the <code>persistentVolumeReclaimPolicy</code> from <code>Retain</code> to <code>Delete</code>.</li> <li>Delete the original PVC. It will now properly delete the original PV, as well as the subvolume in CephFS.</li> </ul> <h3 id=pending-issue>Pending Issue<a class=headerlink href=#pending-issue title="Permanent link">&para;</a></h3> <p>Due to <a href=https://github.com/ceph/ceph-csi/issues/2238>this bug</a>, the global mount for a Volume that is mounted multiple times on the same node will not be unmounted. This does not result in any particular problem, apart from polluting the logs with unmount error messages, or having many different mounts hanging if you create and delete many shared PVCs, or you don't really use them.</p> <p>Until this issue is solved, either on the Rook or Kubelet side, you can always manually unmount the unwanted hanging global mounts on the nodes:</p> <ul> <li>Log onto each node where the volume has been mounted.</li> <li>Check for hanging mounts using their <code>volumeHandle</code>.</li> <li>Unmount the unwanted volumes.</li> </ul> <h2 id=teardown>Teardown<a class=headerlink href=#teardown title="Permanent link">&para;</a></h2> <p>To clean up all the artifacts created by the filesystem demo:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1></a><span class=go>kubectl delete -f kube-registry.yaml</span>
</code></pre></div></td></tr></table></div> <p>To delete the filesystem components and backing data, delete the Filesystem CRD.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Data will be deleted if preserveFilesystemOnDelete=false**.</p> </div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-13-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1></a><span class=go>kubectl -n rook-ceph delete cephfilesystem myfs</span>
</code></pre></div></td></tr></table></div> <p>Note: If the "preserveFilesystemOnDelete" filesystem attribute is set to true, the above command won't delete the filesystem. Recreating the same CRD will reuse the existing filesystem.</p> <h3 id=advanced-example-erasure-coded-filesystem>Advanced Example: Erasure Coded Filesystem<a class=headerlink href=#advanced-example-erasure-coded-filesystem title="Permanent link">&para;</a></h3> <p>The Ceph filesystem example can be found here: <a href=../../../CRDs/Shared-Filesystem/ceph-filesystem-crd/#erasure-coded>Ceph Shared Filesystem - Samples - Erasure Coded</a>.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=/ class=logo> <img src=https://rook.io/images/rook-logo-small.svg alt="rook.io logo"> </a> <p> &#169; Rook Authors 2022. Documentation distributed under <a href=https://creativecommons.org/licenses/by/4.0>CC-BY-4.0</a>. </p> <p> &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage/ >Trademark Usage</a> page. </p> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://slack.rook.io/ target=_blank rel=noopener title=slack.rook.io class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> <a href=https://twitter.com/rook_io target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://groups.google.com/forum/#!forum/rook-dev target=_blank rel=noopener title=groups.google.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M128 0c-17.7 0-32 14.3-32 32v192h96v-32c0-35.3 28.7-64 64-64h224V32c0-17.7-14.3-32-32-32H128zm128 160c-17.7 0-32 14.3-32 32v32h96c35.3 0 64 28.7 64 64v128h192c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32H256zm240 64h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16zM64 256c-17.7 0-32 14.3-32 32v13l155.1 114.9c1.4 1 3.1 1.6 4.9 1.6s3.5-.6 4.9-1.6L352 301v-13c0-17.7-14.3-32-32-32H64zm288 84.8L216 441.6c-6.9 5.1-15.3 7.9-24 7.9s-17-2.8-24-7.9L32 340.8V480c0 17.7 14.3 32 32 32h256c17.7 0 32-14.3 32-32V340.8z"/></svg> </a> <a href=https://blog.rook.io/ target=_blank rel=noopener title=blog.rook.io class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262Zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.tabs.link", "instant", "navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "tabs"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest-release", "provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.aecac24b.min.js></script> </body> </html>